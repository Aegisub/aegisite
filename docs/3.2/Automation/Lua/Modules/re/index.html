<!DOCTYPE html>
<html>

<!-- Mirrored from docs.aegisub.org/3.2/Automation/Lua/Modules/re/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:47:21 GMT -->
<head>
<meta charset='utf-8'>
<title>re - Aegisub Manual</title>
<meta content='Aegisub, Subtitles, VSFilter, Medusa, Sabbu, ' name='Keywords'>
<meta content='http://www.aegisub.org/' name='Author'>
<meta content='Copyright (C) 2012 Aegisub Project.' name='Copyright'>
<link href='index.html' rel='canonical'>
<link href="../../../../img/favicon.ico" rel="icon" type="image/ico" />
<link href="../../../../css/style-144d38ad.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>
<div class='navbar navbar-fixed-top'>
<div class='navbar-inner'>
<div class='container-fluid'>
<a class="brand" style="padding: 3px 10px" href="http://www.aegisub.org/"><img alt="Aegisub" width="82" height="33" src="../../../../img/logo-top-bar-aeef0634.png" />
</a>
<ul class='nav'>
<li>
<a href="http://www.aegisub.org/">Home</a>
</li>
<li>
<a href="http://blog.aegisub.org/">News</a>
</li>
<li>
<a href="http://www.aegisub.org/downloads/">Downloads</a>
</li>
<li class='active'>
<a href="../../../../../index.html">Manual</a>
</li>
<li>
<a href="http://devel.aegisub.org/">Bug Tracker</a>
</li>
<li>
<a href="http://forum.aegisub.org/">Forum</a>
</li>
<li>
<a href="irc://irc.rizon.net/aegisub">IRC</a>
</li>
</ul>
<ul class='nav pull-right'>
<li>
<form action='https://www.paypal.com/cgi-bin/webscr' method='post' style='padding: 13px 0 6px 0; margin: 0' target='_top'>
<input name='cmd' type='hidden' value='_s-xclick'>
<input name='encrypted' type='hidden' value='-----BEGIN PKCS7-----MIIHJwYJKoZIhvcNAQcEoIIHGDCCBxQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYCF/CdSADVe5JGNHY0ajf2Ss7MRtEkipxJ3mWKQEDo0OdPwFjFc/+xOEcJtduO0PzcNWeE3i0QVt+0AKHaXla9fIYeixCgw+j2apsgDi+itShvnrLt6/XSaVYBYjqNLCzYm4piHbHua9uBEPo0MvET4ZimJhF/yFP7PTmsyR/+HRTELMAkGBSsOAwIaBQAwgaQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIZtx+6lgqvzSAgYB5/Hosn9AcEAFSH1GKgyah7QmB0Xqhlr5PzoI98gftPBMU4411ECMXIFX3xuTd1DbKtINakaOmDg612ZzUZgadhEvwKzwiwee3BWIKjFtLINevdu+6FvSvlNnYJWUm+0txwvEs4udrUFKwRxWiN5EQQMrGmHrViOyatjSAuMToMKCCA4cwggODMIIC7KADAgECAgEAMA0GCSqGSIb3DQEBBQUAMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTAeFw0wNDAyMTMxMDEzMTVaFw0zNTAyMTMxMDEzMTVaMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwUdO3fxEzEtcnI7ZKZL412XvZPugoni7i7D7prCe0AtaHTc97CYgm7NsAtJyxNLixmhLV8pyIEaiHXWAh8fPKW+R017+EmXrr9EaquPmsVvTywAAE1PMNOKqo2kl4Gxiz9zZqIajOm1fZGWcGS0f5JQ2kBqNbvbg2/Za+GJ/qwUCAwEAAaOB7jCB6zAdBgNVHQ4EFgQUlp98u8ZvF71ZP1LXChvsENZklGswgbsGA1UdIwSBszCBsIAUlp98u8ZvF71ZP1LXChvsENZklGuhgZSkgZEwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAgV86VpqAWuXvX6Oro4qJ1tYVIT5DgWpE692Ag422H7yRIr/9j/iKG4Thia/Oflx4TdL+IFJBAyPK9v6zZNZtBgPBynXb048hsP16l2vi0k5Q2JKiPDsEfBhGI+HnxLXEaUWAcVfCsQFvd2A1sxRr67ip5y2wwBelUecP3AjJ+YcxggGaMIIBlgIBATCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTE0MDEwMzE0Mzc0NFowIwYJKoZIhvcNAQkEMRYEFFm9tXQlYXaST8+Vq7Ms6lYgjat7MA0GCSqGSIb3DQEBAQUABIGAp1Uqwm3BrsAY29a9wtrY5p1shbKWq9P+8anOpGD2vKBls89fFMmF/3pp1zBPkjwnLkfFXv5FA8r+oONLrduLJGDlg6Wr7dC6Gmx0zAMQCLdvOqd6CjQWgiG+Qcc28Gc4ijc2IIufp9IxkqNaoVzd2uGLbkzKnBVhb2WTWRuKnDo=-----END PKCS7-----'>
<input alt='PayPal - The safer, easier way to pay online!' border='0' name='submit' src='https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif' type='image'>
<img alt='' border='0' height='1' src='https://www.paypalobjects.com/en_US/i/scr/pixel.gif' width='1'>
</form>
</li>
<li>
<a href='http://flattr.com/thing/922938/Aegisub-Advanced-Subtitle-Editor' target='_blank'>
<img alt='Flattr this' src='http://api.flattr.com/button/flattr-badge-large.png' title='Flattr this'>
</a>
</li>
</ul>
</div>
</div>
</div>
<div class='fluid-row'>
<div class='span3'>
<ul id='manual-sidebar'>
<li class='nav-header'>Navigation</li>
<li>
<a href="../../../../Main_Page/index.html">Main Page</a>
</li>
<li class='nav-header'>Introduction</li>
<li>
<a href="../../../../About/index.html">What is Aegisub?</a>
</li>
<li>
<a href="../../../../Highlights/index.html">Highlights</a>
</li>
<li>
<a href="../../../../Credits/index.html">Credits</a>
</li>
<li>
<a href="../../../../Support/index.html">Support Aegisub</a>
</li>
<li>
<a href="../../../../FAQ/index.html">FAQ</a>
</li>
<li>
<a href="../../../../Tutorials/index.html">Tutorials</a>
</li>
<li class='nav-header'>Working with Subtitles</li>
<li>
<a href="../../../../Editing_Subtitles/index.html">Editing Subtitles</a>
</li>
<li>
<a href="../../../../Exporting/index.html">Exporting Subtitles</a>
</li>
<li>
<a href="../../../../Attaching_subtitles_to_video/index.html">Applying Subtitles</a>
</li>
<li>
<a href="../../../../Spell_Checker/index.html">Spell Checker</a>
</li>
<li>
<a href="../../../../Translation_Assistant/index.html">Translation Assistant</a>
</li>
<li>
<a href="../../../../Paste_Over/index.html">Paste Over</a>
</li>
<li>
<a href="../../../../Select_Lines/index.html">Select Lines</a>
</li>
<li class='nav-header'>Typesetting</li>
<li>
<a href="../../../../Typesetting/index.html">Introduction</a>
</li>
<li>
<a href="../../../../Video/index.html">Working with Video</a>
</li>
<li>
<a href="../../../../Styles/index.html">Editing styles</a>
</li>
<li>
<a href="../../../../Visual_Typesetting/index.html">Visual Typesetting</a>
</li>
<li>
<a href="../../../../ASS_Tags/index.html">ASS Override Tags</a>
</li>
<li>
<a href="../../../../Colour_Picker/index.html">Colour Picker</a>
</li>
<li>
<a href="../../../../Styling_Assistant/index.html">Styling Assistant</a>
</li>
<li>
<a href="../../../../Resolution_Resampler/index.html">Resolution Resampler</a>
</li>
<li>
<a href="../../../../Fonts_Collector/index.html">Fonts Collector</a>
</li>
<li class='nav-header'>Timing</li>
<li>
<a href="../../../../Audio/index.html">Working with Audio</a>
</li>
<li>
<a href="../../../../Timing/index.html">Timing subtitles to audio</a>
</li>
<li>
<a href="../../../../Shift_Times/index.html">Shift times</a>
</li>
<li>
<a href="../../../../Timing_Post-Processor/index.html">Timing Post-Processor</a>
</li>
<li>
<a href="../../../../Kanji_Timer/index.html">Kanji Timer</a>
</li>
<li class='nav-header'>Automation</li>
<li>
<a href="../../../index.html">Overview</a>
</li>
<li>
<a href="../../../Karaoke_Templater/index.html">Karaoke Templater</a>
</li>
<li>
<a href="../../index.html">Lua Reference</a>
</li>
<li class='nav-header'>Miscellaneous</li>
<li>
<a href="../../../../Options/index.html">Aegisub Options</a>
</li>
<li>
<a href="../../../../Properties/index.html">Script Properties</a>
</li>
<li>
<a href="../../../../Attachment_Manager/index.html">Attachment Manager</a>
</li>
</ul>
</div>
<div class='span9' id='manual-body'>
<h1 class='page-header'><a href="../../../index.html">Automation</a> / <a href="../../index.html">Lua</a> / <a href="../index.html">Modules</a> / re</h1>
<ol id="markdown-toc">
  <li><a href="#usage">Usage</a>    <ol>
      <li><a href="#match-tables">Match Tables</a></li>
      <li><a href="#flags">Flags</a></li>
      <li><a href="#recompile">re.compile</a></li>
      <li><a href="#resplit">re.split</a></li>
      <li><a href="#regsplit">re.gsplit</a></li>
      <li><a href="#refind">re.find</a></li>
      <li><a href="#regfind">re.gfind</a></li>
      <li><a href="#rematch">re.match</a></li>
      <li><a href="#regmatch">re.gmatch</a></li>
      <li><a href="#resub">re.sub</a></li>
    </ol>
  </li>
</ol>

<p>The <code>re</code> module is a wrapper around boost::regex, intended as a full
replacement for Lua's built in regular expressions. It has two main advantages
over Lua's:</p>

<ol>
  <li>Full Unicode support. Lua regular expressions operate on bytes rather than
 characters, which frequently causes problems with multibyte characters.</li>
  <li>A more powerful and flexible syntax. Properly speaking, Lua does not support
 regular expressions; rather it has a basic pattern matching language that
 supports a small subset of what can be done with regular expressions.
 boost::regex, on the other hand, supports perl-compatible regular
 expressions.</li>
</ol>

<h2 id="usage">Usage</h2>
<p>Import this module with <code><span class="n">re</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">'</span><span class="s">aegisub.re'</span></code>.</p>

<p>See <a href="http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html">boost.regex's
documentation</a>
for information about the regular expression syntax. In general any resources
on the web that refer to Perl regular expressions or PCRE will apply to
this module's regular expressions.</p>

<h3 id="match-tables">Match Tables</h3>
<p>Several of the functions below return Match Tables, which are tables containing
the following fields:</p>

<dl>
  <dt><strong><code>str</code></strong> (<code>string</code>)</dt>
  <dd>The text matched by a pattern or capturing expression</dd>
  <dt><strong><code>first</code></strong> (<code>number</code>)</dt>
  <dd>The start index of <code>str</code> in the original string which had a regular
expression applied to it. Note that this index is one-based and is in bytes,
rather than characters, to match Lua's string indexing.</dd>
  <dt><strong><code>last</code></strong> (<code>number</code>)</dt>
  <dd>The end index of <code>str</code> in the original string which had a regular expression
applied to it. Note that this index is one-based, inclusive, and is in bytes,
rather than characters, to match Lua's string indexing.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">b&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">abc&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">b&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div>
</div>

<h3 id="flags">Flags</h3>
<p>The following flags may be passed to all of the static functions (including
<code>re.compile</code>).  Flags must come after all supplied non-flag arguments, but
optional arguments can be skipped.</p>

<dl>
  <dt>re.ICASE</dt>
  <dd>Ignore case when matching.</dd>
  <dt>re.NOSUB:</dt>
  <dd>Don't set backreferences and capture groups. Can improve performance when
they aren't needed.</dd>
  <dt>re.NEWLINE_ALT:</dt>
  <dd>Treat newline characters as the alternation operator (|).</dd>
  <dt>re.NO_MOD_M:</dt>
  <dd>^ and $ only match the beginning and end of the string rather than newlines.</dd>
  <dt>re.MOD_S:</dt>
  <dd>Treat newlines as normal characters, matched by '.'.</dd>
  <dt>re.MOD_X:</dt>
  <dd>Ignore unescaped whitespace in the expression, making it possible to write
regular expressions that <em>aren't</em> write-only.</dd>
  <dt>re.NO_EMPTY_SUBEXPRESSION:</dt>
  <dd>Don't match empty expressions/alternatives.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">A&quot;</span><span class="p">)</span>
<span class="kc">nil</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">A&quot;</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">ICASE</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">NOSUB</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">A&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div>
</div>

<h3 id="recompile">re.compile</h3>
<p>Synopsis: <code><span class="n">expr</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="p">[</span><span class="n">FLAGS</span><span class="p">])</span></code></p>

<p>Compile a regular expression. Reusing a compiled regular expression is faster
than recompiling it each time it is used, and is usually more readable as well.</p>

<dl>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Regular expression to compile.</dd>
  <dt><strong><code>expr</code></strong> (<code>table</code>)</dt>
  <dd>A table with all of the functions listed below, except without the pattern
and flags arguments.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span><span class="p">:</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">banana&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;</span><span class="s">b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">n&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">n&quot;</span>
<span class="p">}</span></pre></div>
</div>

<h3 id="resplit">re.split</h3>
<p>Synopsis: <code><span class="n">chunks</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">skip_empty</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="n">max_splits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code></p>

<p>Split the string at each of the occurrences of <code>pattern</code>.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to split.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Regular expression to split the string on. Capturing groups in the pattern
are ignored.</dd>
  <dt><strong><code>@skip_empty</code></strong> (<code>boolean</code>)</dt>
  <dd>Do not include zero-length chunks in the results.</dd>
  <dt><strong><code>@max_splits</code></strong> (<code>number</code>)</dt>
  <dd>If greater than zero, the maximum numbers of times to split the string (i.e.
<code>#chunks</code> will be at most <code>max_splits + 1</code>).</dd>
  <dt><strong><code>chunks</code></strong> (<code>table</code>)</dt>
  <dd>A table containing each of the sections of <code>str</code> between the matches of
<code>pattern</code>.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">c&quot;</span>
<span class="p">}</span></pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">c&quot;</span>
<span class="p">}</span></pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="s">,b,c&quot;</span><span class="p">,</span>
<span class="p">}</span></pre></div>
</div>

<h3 id="regsplit">re.gsplit</h3>
<p>Synopsis: <code><span class="n">iter</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">gsplit</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">skip_empty</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="n">max_splits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code></p>

<p>Iterator version of re.split.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to split.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Regular expression to split the string on. Capturing groups in the pattern
are ignored.</dd>
  <dt><strong><code>@skip_empty</code></strong> (<code>boolean</code>)</dt>
  <dd>Do not include zero-length chunks in the results.</dd>
  <dt><strong><code>@max_splits</code></strong> (<code>number</code>)</dt>
  <dd>If greater than zero, the maximum numbers of times to split the string (i.e.
<code>#chunks</code> will be at most <code>max_splits + 1</code>).</dd>
  <dt><strong><code>iter</code></strong> (<code>iterator over strings</code>)</dt>
  <dd>An iterator over each of the sections of <code>str</code> between the matches of
<code>pattern</code>.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">str</span> <span class="k">in</span> <span class="n">re</span><span class="p">.</span><span class="n">gsplit</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">)</span> <span class="k">do</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="nb">print</span> <span class="n">str</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">end</span>
<span class="n">a</span>

<span class="n">b</span>
<span class="n">c</span></pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">str</span> <span class="k">in</span> <span class="n">re</span><span class="p">.</span><span class="n">gsplit</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="k">do</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="nb">print</span> <span class="n">str</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">end</span>
<span class="n">a</span>
<span class="n">b</span>
<span class="n">c</span></pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">str</span> <span class="k">in</span> <span class="n">re</span><span class="p">.</span><span class="n">gsplit</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">,&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">a,,b,c&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">do</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="nb">print</span> <span class="n">str</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">end</span>
<span class="n">a</span>
<span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span></pre></div>
</div>

<h3 id="refind">re.find</h3>
<p>Synopsis: <code><span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></code></p>

<p>Find all non-overlapping substrings of <code>str</code> which match <code>pattern</code>.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to search for the pattern in.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Pattern to search for. Capturing groups in the pattern are ignored.</dd>
  <dt><strong><code>matches</code></strong> (<code>table</code> or <code>nil</code>)</dt>
  <dd>A table of <a href="index.html#match-tables">Match Tables</a> for all matches, or <code>nil</code> if
there were none.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">.&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">☃☃&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">☃&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">☃&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="k">function</span> <span class="nf">contains_an_a</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">re</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">a&quot;</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Has an a&quot;</span>
    <span class="k">else</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Doesn't have an a&quot;</span>
    <span class="k">end</span>
<span class="k">end</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">contains_an_a</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">abc&quot;</span><span class="p">)</span>
<span class="n">Has</span> <span class="n">an</span> <span class="n">a</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">contains_an_a</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">def&quot;</span><span class="p">)</span>
<span class="n">Doesn</span><span class="s1">'</span><span class="s">t have an a</span></pre></div>
</div>

<h3 id="regfind">re.gfind</h3>
<p>Synopsis: <code><span class="n">iter</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">gfind</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></code></p>

<p>Iterate over all non-overlapping substrings of <code>str</code> which match <code>pattern</code>.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to search for the pattern in.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Pattern to search for. Capturing groups in the pattern are ignored.</dd>
  <dt><strong><code>iter</code></strong> (<code>iterator over string, number, number</code>)</dt>
  <dd>An iterator which produces three values at each step: a matched string, the
started index of the match in the source string, and the inclusive end index of
the match in the source string.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">str</span><span class="p">,</span> <span class="n">start_idx</span><span class="p">,</span> <span class="n">end_idx</span> <span class="k">in</span> <span class="n">re</span><span class="p">.</span><span class="n">gfind</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">.&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">☃☃&quot;</span><span class="p">)</span> <span class="k">do</span>
<span class="o">&gt;&gt;&gt;</span>     <span class="nb">print</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">%d-%d: %s&quot;</span><span class="p">,</span> <span class="n">start_idx</span><span class="p">,</span> <span class="n">end_idx</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">end</span>
<span class="mi">1</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="err">☃</span>
<span class="mi">4</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span> <span class="err">☃</span></pre></div>
</div>

<h3 id="rematch">re.match</h3>
<p>Synopsis: <code><span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></code></p>

<p>Match a pattern against a string. This differs from <code>find</code> in that <code>find</code>
returns all matches and does not capture subgroups, while this returns only a
single match along with the captured subgroups.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to search for the pattern in.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Pattern to search for.</dd>
  <dt><strong><code>matches</code></strong> (<code>table</code> or <code>nil</code>)</dt>
  <dd><code>nil</code> if the pattern did not match the string. Otherwise, a table containing
a <a href="index.html#match-tables">Match Table</a> for the full match, followed by a <a href="index.html#match-tables">Match
Table</a> for each capturing subexpression in the pattern (if
any).</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><pre class="highlight"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">(\d+) (\d+) (\d+)&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">{250 1173 380}Help!&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">250 1173 380&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">250&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">1173&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">380&quot;</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;</span><span class="s">last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div>
</div>

<h3 id="regmatch">re.gmatch</h3>
<p>Synopsis: <code><span class="n">iter</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">gmatch</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></code></p>

<p>Iterator version of <a href="index.html#re.match">`re.match`</a>.</p>

<dl>
  <dt><strong><code>@str</code></strong> (<code>string</code>)</dt>
  <dd>String to search for the pattern in.</dd>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Pattern to search for.</dd>
  <dt><strong><code>matches</code></strong> (<code>iterator over table</code>)</dt>
  <dd>An iterator which returns a table containing a <a href="index.html#match-tables">Match
Table</a> for the full match (if it matched), followed by a
<a href="index.html#match-tables">Match Table</a> for each capturing subexpression in the pattern
(if any).</dd>
</dl>

<h3 id="resub">re.sub</h3>
<p>Synopsis: <code><span class="n">out_str</span><span class="p">,</span> <span class="n">rep_count</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code></p>

<p>Replace each occurrence of <code>pattern</code> in <code>str</code> with <code>replace</code>.</p>

<dl>
  <dt><strong><code>@pattern</code></strong> (<code>string</code>)</dt>
  <dd>Pattern to search for.</dd>
  <dt><strong><code>@replace</code></strong> (<code>string</code> or <code>function</code>)</dt>
  <dd>Replacement for matches. This may be either a string which is inserted, or a
  function which is called for each match.

    <p>If <code>replace</code> is a string, it may contain references to the matches. <code>&amp;</code> and
  <code>\0</code> are replaced with the full match, and <code>\&lt;number&gt;</code> is replaced with the
  appropriate captured subexpression.</p>

    <p>If <code>replace</code> is a function, it is called for either the entire match (if
  there are no capturing subexpressions), or for each captured subexpression.
  It is passed the match string, start index of the match, and end index of
  the match. If it returns a string, the match is replaced with the return
  value. If it returns anything else, then the source string is left
  unchanged.</p>
  </dd>
  <dt><strong><code>@max_count</code></strong> (<code>number</code>)</dt>
  <dd>If greater than zero, the maximum number of replacements to make.</dd>
  <dt><strong><code>out_str</code></strong> (<code>string</code>)</dt>
  <dd>The input string, with replacements applied.</dd>
  <dt><strong><code>rep_count</code></strong> (<code>number</code>)</dt>
  <dd>The number of replacements that were made.</dd>
</dl>

<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><p>Replace all instances of \k with \kf:</p>

<pre class="highlight lua"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">{</span><span class="se">\\</span><span class="s">k10}a{</span><span class="se">\\</span><span class="s">k15}b{</span><span class="se">\\</span><span class="s">k30}c&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s">k&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s">kf&quot;</span><span class="p">)</span>
<span class="p">{</span><span class="err">\</span><span class="n">kf10</span><span class="p">}</span><span class="n">a</span><span class="p">{</span><span class="err">\</span><span class="n">kf15</span><span class="p">}</span><span class="n">b</span><span class="p">{</span><span class="err">\</span><span class="n">kf30</span><span class="p">}</span><span class="n">c</span>
</pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><p>Replace all instances of \k and \K with \kf:</p>

<pre class="highlight lua"><span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">{</span><span class="se">\\</span><span class="s">K10}a{</span><span class="se">\\</span><span class="s">K15}b{</span><span class="se">\\</span><span class="s">k30}c&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s">k&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s">kf&quot;</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">ICASE</span><span class="p">)</span>
<span class="p">{</span><span class="err">\</span><span class="n">kf10</span><span class="p">}</span><span class="n">a</span><span class="p">{</span><span class="err">\</span><span class="n">kf15</span><span class="p">}</span><span class="n">b</span><span class="p">{</span><span class="err">\</span><span class="n">kf30</span><span class="p">}</span><span class="n">c</span>
</pre></div>
</div>
<div class='examplebox'>
<div class='exampleheader'>Example</div>
<div class='examplecontents'><p>Add one to each \k duration:</p>

<pre class="highlight lua"><span class="k">function</span> <span class="nf">add_one</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tostring</span><span class="p">(</span><span class="nb">tonumber</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">{</span><span class="se">\\</span><span class="s">k10}a{</span><span class="se">\\</span><span class="s">k15}b{</span><span class="se">\\</span><span class="s">k30}c&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s">k(\[[:digit:]]+)&quot;</span><span class="p">,</span> <span class="n">add_one</span><span class="p">)</span>
<span class="p">{</span><span class="err">\</span><span class="n">k11</span><span class="p">}</span><span class="n">a</span><span class="p">{</span><span class="err">\</span><span class="n">k16</span><span class="p">}</span><span class="n">b</span><span class="p">{</span><span class="err">\</span><span class="n">k31</span><span class="p">}</span><span class="n">c</span>
</pre></div>
</div>

<div class='navbox'>
<div><a href="../../../index.html">Automation</a></div>
<table>
<tr>
<th>Overview:</th>
<td><a href="../../../Manager/index.html">Automation Manager</a> • <a href="../../../Running_macros/index.html">Running macros</a> • <a href="../../../../Exporting/index.html">Using export filters</a> • <a href="../../../Included_macros/index.html">Standard macros</a></td>
</tr>
<tr>
<th><a href="../../../Karaoke_Templater/index.html">Karaoke Templater</a> reference:</th>
<td><a href="../../../Karaoke_Templater/Declaring_template_and_code_lines/index.html">Declaring templates</a> • <a href="../../../Karaoke_Templater/Template_execution_rules_and_order/index.html">Execution order</a> • <a href="../../../Karaoke_Templater/Template_modifiers/index.html">Modifiers</a> • <a href="../../../Karaoke_Templater/Inline_variables/index.html">Inline-variables ($-variables)</a> <br> <a href="../../../Karaoke_Templater/Code_lines_and_blocks/index.html">Code lines and blocks</a> • <a href="../../../Karaoke_Templater/Code_execution_environment/index.html">Execution envirionment</a></td>
</tr>
<tr>
<th><a href="../../index.html">Lua API</a>  reference:</th>
<td><a href="../../Registration/index.html">Registration</a> • <a href="../../Subtitle_file_interface/index.html">Subtitles object</a> • <a href="../../Progress_reporting/index.html">Progress reporting</a> • <a href="../../Dialogs/index.html">Dialogs</a> • <a href="../../Miscellaneous_APIs/index.html">Misc. APIs</a></td>
</tr>
<tr>
<th><a href="../index.html">Lua Modules</a>:</th>
<td><a href="../karaskel.lua/index.html">karaskel.lua</a> • <a href="../util/index.html">util</a> • <a href="../unicode/index.html">unicode</a> • <a href="#">cleantags.lua</a> • <a href="../clipboard/index.html">clipboard</a> • <a href="index.html">re</a></td>
</tr>
<tr>
<th>Karaskel concepts:</th>
<td><a href="../karaskel.lua/index.html#Style_table">Style tables</a> • <a href="../karaskel.lua/index.html#Dialogue_line_table">Dialogue line tables</a> • <a href="../karaskel.lua/index.html#Karaoke_and_furigana_syllable_tables">Syllable tables</a> • <a href="../../../../Karaoke_inline-fx/index.html">Inline effects</a> • <a href="../../../../Furigana_karaoke/index.html">Furigana</a></td>
</tr>
</table>
</div>

</div>
</div>

<footer class='footer span12 pagination-centered'>
<p>
Hosting kindly provided by
<a href='http://www.networkredux.com/'>NetworkRedux</a>
</p>
</footer>
</body>

<!-- Mirrored from docs.aegisub.org/3.2/Automation/Lua/Modules/re/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:47:21 GMT -->
</html>

