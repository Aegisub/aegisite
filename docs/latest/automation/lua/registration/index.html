<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://aegisub.github.io/aegisite/main.9979e0ffd73ff24a57d2d6ccbf74fd8e4d167353c7e8c4f17a77c321777141d2c09329ceba6ba5cfe0be06bf4026cd37745ba1cc14668401b6a15b9239139d7e.css integrity="sha512-mXng/9c/8kpX0tbMv3T9jk0Wc1PH6MTxenfDIXdxQdLAkynOumulz+C+Br9AJs03dFuhzBRmhAG2oVuSOROdfg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}.collapse:not(.show){display:block}button.btn-toggle{cursor:unset}button.btn-toggle::before{display:none}.doks-subnavbar{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Registration - Aegisub</title><meta name=description content="Registration covers presenting your Automation 4 Lua script to Aegisub, providing information about it and registering what features it provides.
Features explained # One of the primary concepts in Automation 4 is the feature. A feature is something a script makes available for Aegisub to call back in response to a user action.
A feature is not a plain callback. Rather, it&amp;rsquo;s usually a set of several callback functions as well as some information on how they should be presented to the user in the GUI."><link rel=canonical href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Registration"><meta property="og:description" content="Registration covers presenting your Automation 4 Lua script to Aegisub, providing information about it and registering what features it provides.
Features explained # One of the primary concepts in Automation 4 is the feature. A feature is something a script makes available for Aegisub to call back in response to a user action.
A feature is not a plain callback. Rather, it&rsquo;s usually a set of several callback functions as well as some information on how they should be presented to the user in the GUI."><meta property="og:url" content="https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/"><meta property="og:site_name" content="Aegisub"><meta property="og:image" content="https://aegisub.github.io/aegisite/img/logo.png"><meta property="og:image:alt" content="Aegisub"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@aegisub"><meta name=twitter:creator content><meta name=twitter:title content="Registration"><meta name=twitter:description content><meta name=twitter:image content="https://aegisub.github.io/aegisite/img/logo.png"><meta name=twitter:image:alt content="Registration"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://aegisub.github.io/#/schema/organization/1","name":"Aegisub","url":"https://aegisub.github.io/","sameAs":["https://twitter.com/aegisub","https://github.com/Aegisub/Aegisub"],"logo":{"@type":"ImageObject","@id":"https://aegisub.github.io/#/schema/image/1","url":"https://aegisub.github.io/logo-aegisub.png","width":512,"height":512,"caption":"Aegisub"},"image":{"@id":"https://aegisub.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://aegisub.github.io/#/schema/website/1","url":"https://aegisub.github.io/","name":"Aegisub","description":"Aegisub is a free, cross-platform open source tool for creating and modifying subtitles. Aegisub makes it quick and easy to time subtitles to audio, and features many powerful tools for styling them, including a built-in real-time video preview.","publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/","url":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/","name":"Registration","description":"","isPartOf":{"@id":"https://aegisub.github.io/#/schema/website/1"},"about":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/"]}]},{"@type":"BreadcrumbList","@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/","url":"https://aegisub.github.io/aegisite/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/docs/","url":"https://aegisub.github.io/aegisite/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/docs/latest/","url":"https://aegisub.github.io/aegisite/docs/latest/","name":"Latest"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/docs/latest/automation/","url":"https://aegisub.github.io/aegisite/docs/latest/automation/","name":"Automation"}},{"@type":"ListItem","position":5,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/","url":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/","name":"Lua"}},{"@type":"ListItem","position":6,"item":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://aegisub.github.io/#/schema/article/1","headline":"Registration","description":"","isPartOf":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/"},"mainEntityOfPage":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://aegisub.github.io/#/schema/person/2"},"publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"image":{"@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://aegisub.github.io/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#/schema/image/2","url":"https://aegisub.github.io/aegisite/img/logo.png","contentUrl":"https://aegisub.github.io/aegisite/img/logo.png","caption":"Registration"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://aegisub.github.io/aegisite/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aegisub.github.io/aegisite/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aegisub.github.io/aegisite/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://aegisub.github.io/aegisite/site.webmanifest></head><body class="docs single"><div class=sticky-lg-top><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=https://aegisub.github.io/aegisite/ aria-label=Aegisub>Aegisub</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://aegisub.github.io/aegisite/>Aegisub</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/downloads/main/>Downloads</a></li><li class=nav-item><a class="nav-link ps-0 py-1 active" href=https://aegisub.github.io/aegisite/docs/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub/issues>Bug Tracker</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub aria-label="View repository on GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
EN
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/>English</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/ hreflang=zh-cn lang=zh-cn>简体中文</a></li></ul></div></nav></header></div><nav class="doks-subnavbar py-2 sticky-lg-top d-lg-none" aria-label="Secondary navigation"><div class="container-fluid d-flex align-items-md-center"><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed ms-auto" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation">Docs Navigation<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
Navigation</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/main_page/>Main Page</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
Introduction</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/about/>What is Aegisub?</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/highlights/>Highlights</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/credits/>Credits</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/support/>Support Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
Tutorials</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/karaoke_timing_tutorial/>Karaoke Timing Tutorial</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/karaoke_inline-fx/>Inline effects Tutorial</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/furigana_karaoke/>Furigana Tutorial</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
Working with Subtitles</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/editing_subtitles/>Editing Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/exporting/>Exporting Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/attaching_subtitles_to_video/>Applying Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/spell_checker/>Spell Checker</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/translation_assistant/>Translation Assistant</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/paste_over/>Paste Over</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/select_lines/>Select Lines</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
Typesetting</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/typesetting/>Typesetting Introduction</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/video/>Working with Video</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/styles/>Editing styles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/visual_typesetting/>Visual Typesetting</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/ass_tags/>ASS Override Tags</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/colour_picker/>Colour Picker</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/styling_assistant/>Styling Assistant</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/resolution_resampler/>Resolution Resampler</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/fonts_collector/>Fonts Collector</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
Timing</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/audio/>Working with Audio</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/timing/>Timing subtitles to audio</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/shift_times/>Shift times</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/timing_post-processor/>Timing Post-Processor</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/kanji_timer/>Kanji Timer</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
Automation</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/>Automation Overview</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
Karaoke Templater</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/declaring_template_and_code_lines/>Declaring templates</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/template_execution_rules_and_order/>Execution order</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/template_modifiers/>Modifiers</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/inline_variables/>Inline-variables ($-variables)</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/code_lines_and_blocks/>Code lines and blocks</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial_1/>A simple example</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial_2/>Using math expressions</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua Reference</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/>Overview</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/>Registration</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>Subtitles object</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/progress_reporting/>Progress reporting</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/dialogs/>Dialogs</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/miscellaneous_apis/>Misc. APIs</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua Modules</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/clipboard/>clipboard</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/manager/>Automation Manager</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/running_macros/>Running macros</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/included_macros/>Standard macros</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
Miscellaneous</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/options/>Aegisub Options</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/autosave/>Autosave</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/aegisub_path_specifiers/>Path Specifiers</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/properties/>Script Properties</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/script_resolution/>Script Resolution</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/attachment_manager/>Attachment Manager</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/commands/>Commands</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
Navigation</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/main_page/>Main Page</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
Introduction</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/about/>What is Aegisub?</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/highlights/>Highlights</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/credits/>Credits</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/support/>Support Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
Tutorials</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/karaoke_timing_tutorial/>Karaoke Timing Tutorial</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/karaoke_inline-fx/>Inline effects Tutorial</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/furigana_karaoke/>Furigana Tutorial</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
Working with Subtitles</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/editing_subtitles/>Editing Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/exporting/>Exporting Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/attaching_subtitles_to_video/>Applying Subtitles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/spell_checker/>Spell Checker</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/translation_assistant/>Translation Assistant</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/paste_over/>Paste Over</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/select_lines/>Select Lines</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
Typesetting</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/typesetting/>Typesetting Introduction</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/video/>Working with Video</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/styles/>Editing styles</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/visual_typesetting/>Visual Typesetting</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/ass_tags/>ASS Override Tags</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/colour_picker/>Colour Picker</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/styling_assistant/>Styling Assistant</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/resolution_resampler/>Resolution Resampler</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/fonts_collector/>Fonts Collector</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
Timing</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/audio/>Working with Audio</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/timing/>Timing subtitles to audio</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/shift_times/>Shift times</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/timing_post-processor/>Timing Post-Processor</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/kanji_timer/>Kanji Timer</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
Automation</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/>Automation Overview</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
Karaoke Templater</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/declaring_template_and_code_lines/>Declaring templates</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/template_execution_rules_and_order/>Execution order</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/template_modifiers/>Modifiers</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/inline_variables/>Inline-variables ($-variables)</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/code_lines_and_blocks/>Code lines and blocks</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial_1/>A simple example</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/karaoke_templater/tutorial_2/>Using math expressions</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua Reference</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/>Overview</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/>Registration</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>Subtitles object</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/progress_reporting/>Progress reporting</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/dialogs/>Dialogs</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/miscellaneous_apis/>Misc. APIs</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua Modules</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/clipboard/>clipboard</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/manager/>Automation Manager</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/running_macros/>Running macros</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/automation/included_macros/>Standard macros</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
Miscellaneous</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/options/>Aegisub Options</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/autosave/>Autosave</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/aegisub_path_specifiers/>Path Specifiers</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/properties/>Script Properties</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/script_resolution/>Script Resolution</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/attachment_manager/>Attachment Manager</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/docs/latest/commands/>Commands</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#features-explained>Features explained</a></li><li><a href=#script-information-globals>Script information globals</a></li><li><a href=#registration-functions>Registration functions</a><ul><li><a href=#aegisubregister_macro>aegisub.register_macro</a></li><li><a href=#aegisubregister_filter>aegisub.register_filter</a></li></ul></li><li><a href=#feature-callback-functions>Feature callback functions</a><ul><li><a href=#macro-processing-function>Macro processing function</a></li><li><a href=#macro-validation-function>Macro validation function</a></li><li><a href=#export-filter-processing-function>Export filter processing function</a></li><li><a href=#export-filter-configuration-panel-provider>Export filter configuration panel provider</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Registration</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#features-explained>Features explained</a></li><li><a href=#script-information-globals>Script information globals</a></li><li><a href=#registration-functions>Registration functions</a><ul><li><a href=#aegisubregister_macro>aegisub.register_macro</a></li><li><a href=#aegisubregister_filter>aegisub.register_filter</a></li></ul></li><li><a href=#feature-callback-functions>Feature callback functions</a><ul><li><a href=#macro-processing-function>Macro processing function</a></li><li><a href=#macro-validation-function>Macro validation function</a></li><li><a href=#export-filter-processing-function>Export filter processing function</a></li><li><a href=#export-filter-configuration-panel-provider>Export filter configuration panel provider</a></li></ul></li></ul></nav></div></nav><p><strong>Registration</strong> covers presenting your <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/>Automation 4 Lua</a>
script to Aegisub, providing information about it and registering what
<em>features</em> it provides.</p><h2 id=features-explained>Features explained <a href=#features-explained class=anchor aria-hidden=true>#</a></h2><p>One of the primary concepts in Automation 4 is the <em>feature</em>. A feature is
something a script makes available for Aegisub to call back in response to a
user action.</p><p>A feature is not a plain callback. Rather, it&rsquo;s usually a set of several
callback functions as well as some information on how they should be
presented to the user in the GUI.</p><p>One feature is the <strong>macro</strong>. A macro is presented as an item in the
Automation menu. A macro has a name (the title show in the menu), a
description (the text shown on the status bar when hovering over the menu
item), a processing function (the function called when the user selects the
menu item) and an optional validation function (determines whether the macro
can even do any work in the current state.)</p><p>Another feature is the <strong>export filter</strong>. The export filter is presented in
the <a href=https://aegisub.github.io/aegisite/docs/latest/exporting/>Export</a> dialogue and can be applied during an export
operation. Export filters also have a name, description, processing function
and then an optional configuration panel provider. The configuration panel
provider is a function that returns a configuration dialogue definition
structure which will be displayed in the Export dialogue when the export
filter is enabled. The settings filled into the configuration panel are
passed to the processing function when it is run.</p><h2 id=script-information-globals>Script information globals <a href=#script-information-globals class=anchor aria-hidden=true>#</a></h2><p>A script can set a few global variables to provide metadata about the script
to Aegisub. The information given with these variables are displayed in the
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/manager/>Automation Manager</a> dialogue and the Script Info dialogue.</p><ul><li><strong>script_name</strong> (string) - Name of the script. This should be short.</li><li><strong>script_description</strong> (string) - Description of the purpose of the
script. Shouldn&rsquo;t be too long either.</li><li><strong>script_version</strong> (string or number) - Version number/name of the script.
This is freeform; no specific meaning is assigned to this.</li><li><strong>script_author</strong> (string) - Author credits for the script.</li></ul><p>All of these are optional; a script does not have to provide any of these.
If no script name is given, the file name is used instead for display
purposes.</p><h2 id=registration-functions>Registration functions <a href=#registration-functions class=anchor aria-hidden=true>#</a></h2><p>The registration functions are the functions provided by Automation 4 Lua
you can call to make a feature available to Aegisub. You will usually call
these in the top level, at the very bottom of your script.</p><h3 id=aegisubregister_macro>aegisub.register_macro <a href=#aegisubregister_macro class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.register_macro(name, description, processing_function, validation_function, is_active_function)</code></p><p>Register a macro feature.</p><ul><li><p><strong>name</strong> (string) - The name displayed on the Automation menu. This should
be very short, try three words or less, and should be in command
tense.</p><p>If forward slashes (/) are included in the name, the name will be
split on the slash, with the portion before the slash used as the name
of the submenu to place the macro in. For example, if you register a
macro named &ldquo;Foo/Bar&rdquo; and a macro named &ldquo;Foo/Baz&rdquo;, the automation menu
will have a submenu named &ldquo;Foo&rdquo; with &ldquo;Bar&rdquo; and &ldquo;Baz&rdquo; entries.</p><p>Menus can be nested to whatever depth is supported by the OS, but
nesting more than one level deep is unlikely to be a good idea.</p></li><li><p><strong>description</strong> (string) - The description displayed on the status bar
when the user hovers the mouse over the menu item. This should be a
concise description of what the macro does. Try to keep it at most 60
characters.</p></li><li><p><strong>processing_function</strong> (function) - The function that is called when the
user selects the menu item. This must be a function with the <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#macroprocessingfunction>macro processing function API</a>.</p></li><li><p><strong>validation_function</strong> (function, optional) - This function is called to
determine whether the menu item should be available to the user or not.
(Grayed out or not.) If no validation function is provided the macro is
always available. This function must follow the <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#macrovalidationfunction>macro validation function API</a>.</p></li><li><p><strong>is_active_function</strong> (function, optional) - This function is called to
determine whether the menu item should be shown with a check mark next to it.
If no function is provided the macro is never checked. This function uses the
same API as validation functions, and all of the same caveats apply.</p></li></ul><h3 id=aegisubregister_filter>aegisub.register_filter <a href=#aegisubregister_filter class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.register_filter(name, description, priority, processing_function, configuration_panel_provider)</code></p><p>Register an export filter feature.</p><ul><li><p><strong>name</strong> (string) - The name displayed in the export filters list. The
name should be rather short.</p></li><li><p><strong>description</strong> (string) - The description displayed in the description
box when the user highlights the export filter in the Export dialogue.</p></li><li><p><strong>priority</strong> (number) - Determines the initial ordering of export filter
application. Filters with higher priority are applied earlier than filters
with lower priority. The user can change the filter application order in
the Export dialogue. Priorities of the Aegisub built in export filters:</p><ul><li>Transform Framerate = 1000 (karaoke effects should have higher priority
than this)</li><li>Clean Script Info = 0 (your script might depend on the information
cleaned by this)</li><li>Fix Styles = -5000 (should almost always run last)</li></ul></li><li><p><strong>processing_function</strong> (function) - The function that is called when the
user initiates the export operation. This must be a function with the
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#exportfilterprocessingfunction>export filter processing function API</a>.</p></li><li><p><strong>configuration_panel_provider</strong> (function, optional) - A function that
provides a configuration panel for the export filter. If this function is
not provided the export filter will not have a configuration panel. This
function must follow the <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#exportfilterconfigurationpanelprovider>export filter configuration panel provider API</a>.</p></li></ul><h2 id=feature-callback-functions>Feature callback functions <a href=#feature-callback-functions class=anchor aria-hidden=true>#</a></h2><p>These are the callback functions you provide to the registration functions.</p><h3 id=macro-processing-function>Macro processing function <a href=#macro-processing-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>process_macro(subtitles, selected_lines, active_line)</code></p><p>Macro processing functions passed to
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#aegisub.register_macro><code>aegisub.register_macro</code></a>
must have this signature. The name <code>process_macro</code> is a placeholder for your
own function name.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> you use to manipulate
the subtitles with.</li><li><strong>selected_lines</strong> (table) - An array with indexes of the selected lines.
The values in this table are line indexes in the <em>subtitles</em> object at its
initial state. Only <code>dialogue</code> class lines can ever be selected.</li><li><strong>active_line</strong> (number) - The line that is currently available for
editing in the subtitle editing area. This is an index into the
<em>subtitles</em> object. This line will usually also be selected, but this is
not a strict requirement.</li></ul><p><strong>Return value:</strong>
The macro processing function can return up to two values: a new
<code>selected_lines</code> table containing indices of the lines to select after the
macro returns, and an index of the line to make the new <code>active_line</code>. If
set, the new active line index must be one of the lines in the new
<code>selected_lines</code> table.</p><h3 id=macro-validation-function>Macro validation function <a href=#macro-validation-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>validate_macro(subtitles, selected_lines, active_line)</code></p><p>Macro validation functions passed to
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#aegisub.register_macro><code>aegisub.register_macro</code></a>
must have this signature. The name <code>validate_macro</code> is a placeholder for
your own function name.</p><p><strong>Important, execution time:</strong> Validation functions should always run very
fast. Do as little work as possible inside this function, because it is run
every time the user pulls open the Automation menu, and every millisecond
you spend in <code>validate_macro</code> is one millisecond delay in opening the menu.
Consider that the user might have very large files open. Don&rsquo;t block the UI.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> for the current subtitle
file. This is <strong>read-only</strong>. You cannot modify the subtitles in the
validation function, and attempting to do so will cause a run-time error.</li><li><strong>selected_lines</strong> (table) - An array with indexes of the selected lines.
The values in this table are line indexes in the <em>subtitles</em> object at its
initial state. Only <code>dialogue</code> class lines can ever be selected.</li><li><strong>active_line</strong> (number) - The line that is currently available for
editing in the subtitle editing area. This is an index into the
<em>subtitles</em> object.</li></ul><p><strong>Return value:</strong>
Boolean, <code>true</code> if the macro can run given the current
state of <em>subtitles</em>, <em>selected_lines</em> and <em>active_line</em>, <code>false</code> if it can
not.</p><p>In addition to the primary return value, the validation function can return
a string. If it does, the description of the macro is set to the string.
This is intended for reporting information to the user about why the macro
cannot be run, but there may be more uses for it.</p><h3 id=export-filter-processing-function>Export filter processing function <a href=#export-filter-processing-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>process_filter(subtitles, settings)</code></p><p>Export filter processing functions passed to
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#aegisub.register_filter><code>aegisub.register_filter</code></a>
must have this signature. The name <code>process_filter</code> is a placeholder for
your own function name.</p><p>You do not have to worry about undo issues with export filters. You always
work on a copy of the subtitle file.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> you use to manipulate
the subtitles with. This is a copy of the open subtitles file, so
modifying this subtitles object does not modify the open file and will
only affect the exported file.</li><li><strong>settings</strong> (table) - Configuration settings entered into the
configuration panel or an empty table if there is no configuration panel.
See the page on <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/dialogs/>configuration dialogues</a> for more information
on the format of this table.</li></ul><p><strong>Return value:</strong>
Nothing.</p><h3 id=export-filter-configuration-panel-provider>Export filter configuration panel provider <a href=#export-filter-configuration-panel-provider class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>get_filter_configuration_panel(subtitles, old_settings)</code></p><p>Export filter configuration panel providers passed to
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/#aegisub.register_filter><code>aegisub.register_filter</code></a>
must have this signature. The name <code>get_filter_configuration_panel</code> is a
placeholder for your own function name.</p><p><strong>Important, execution time:</strong>
This function is called automatically when
the user opens the Export dialogue, and Aegisub blocks until it returns with
a configuration panel. Consider that the user might have a very large file
open, and that every millisecond spent creating your configuration dialogue
is one more millisecond the user has to wait for the Export dialogue to
open. Don&rsquo;t block the UI.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> for the current subtitle
file. This is <strong>read-only</strong>. You cannot modify the subtitles in the filter
configuration provider. Attempting to modify the subtitles will cause a
run-time error.</li><li><strong>old_settings</strong> (table) - Previous configuration settings entered into
the configuration panel, if any. When an Automation 4 export filter is
run, any configuration settings are automatically stored to the original
file. If any stored settings exist for this filter, they are passed as
<em>old_settings</em> so you can use them as a base for filling in defaults.</li></ul><p><strong>Return value:</strong>
A configuration dialogue table. See the page on
<a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/dialogs/>configuration dialogues</a> for
more information on the format of this table.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/><div class="card my-1"><div class="card-body py-2">&larr; Lua Reference</div></div></a><a class=ms-auto href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/subtitle_file_interface/><div class="card my-1"><div class="card-body py-2">Subtitles object &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a> and <a class=text-muted href=https://getdoks.org/>Doks</a>.<br>Copyright (c) AegiSite <a href=https://github.com/Aegisub/aegisite/graphs/contributors>contributors</a>.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://aegisub.github.io/aegisite/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=https://aegisub.github.io/aegisite/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/js/highlight.min.4f51b93ee96c3e2c0e1671986624888b24b9b8bfee2a20aa0556d7f3a61098d5c094012a22f5ed6f904b570b0554a4473114d439df142e1018d751582d3470f6.js integrity="sha512-T1G5PulsPiwOFnGYZiSIiyS5uL/uKiCqBVbX86YQmNXAlAEqIvXtb5BLVwsFVKRHMRTUOd8ULhAY11FYLTRw9g==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/main.min.6f7a46bd1f121978f9b99a72930700eeeea078245b498f61330d43745353ee2a541491c87fd8307512f49a752b386387e2c265a11377ecce26a2acb8fa24fecf.js integrity="sha512-b3pGvR8SGXj5uZpykwcA7u6geCRbSY9hMw1DdFNT7ipUFJHIf9gwdRL0mnUrOGOH4sJloRN37M4moqy4+iT+zw==" crossorigin=anonymous defer></script></body></html>