<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
    
<!-- Mirrored from docs.aegisub.org/manual/Karaoke_inline-fx by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:45:22 GMT -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.2" />
		<meta name="keywords" content="Karaoke inline-fx,Audio,Automation,Automation 4 Lua Configuration dialogues,Automation 4 Lua Miscellaneous APIs,Automation 4 Lua Progress reporting,Automation 4 Lua Registration,Automation 4 Lua Subtitle file interface,Automation 4 karaskel.lua,Automation 4 unicode.lua,Automation 4 utils.lua" />
		<link rel="shortcut icon" href="./favicon.ico" />
		
		
		
    <title>Karaoke inline-fx - Aegisub Manual</title>
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "css/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="css/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "./css/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "./css/IE55Fixes.css";</style><![endif]-->
    <!--[if gte IE 6]><style type="text/css">@import "./css/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="/manual_real/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    
    <script type= "text/javascript">/*<![CDATA[*/
		var skin = "aegisub";
		var stylepath = "/manual_real/skins";
		var wgArticlePath = "/manual/$1";
		var wgScriptPath = "/manual_real";
		var wgScript = "../manual_real/index.html";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "../index.html";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Karaoke_inline-fx";
		var wgTitle = "Karaoke inline-fx";
		var wgAction = "view";
		var wgArticleId = "188";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 727;
		var wgVersion = "1.15.2";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="js/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="../manual_real/index7ca3.html?title=-&amp;action=raw&amp;gen=js&amp;useskin=aegisub"><!-- site js --></script>
    <!-- Head Scripts -->
				<script type="text/javascript" src="js/ajax.js"></script>
              <style>
          .editsection { display: none; }
        </style>
          </head>
    <body  class="mediawiki  ltr ns-0 ns-subject page-Karaoke_inline-fx">

   
   
   <div id="globalWrapper">
    <div id="column-content">
     <div id="content">

	  

	  <a name="top" id="contentTop"></a>
	  	  <h1 class="firstHeading">Karaoke inline-fx</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Aegisub Manual</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>Karaoke inline-fx (inline effects) is a way of marking up <a href="Audio.html#Karaoke_timing" title="Audio">timed karaoke</a> to assign different effects to different parts of a line.
</p><p>By itself, inline-fx markup doesn't do anything, it only has an effect when a <a href="Automation.html" title="Automation">karaoke effect script</a> that understands it is applied to the timed karaoke.
</p>
<a name="The_markup" id="The_markup"></a><h2> <span class="mw-headline"> The markup </span></h2>
<p>Inline-fx tags are (otherwise invalid) ASS override tags of the form <tt>\-effectname</tt>, where <i>effectname</i> is the name of the inline-fx defined.
</p><p>An inline-fx tag affects the syllable it is placed in and every following syllable, until the next syllable with an inline-fx tag in it.
</p><p>At the start of each line the inline-fx is reset to nothing.
</p>
<div style="margin: 0.3em 2em; padding: 0.3em; padding-left: 0.8em; background: #f0f0e9; border-left: 1px solid #aaa;"><p style="margin: 0; padding-bottom: 0.3em; font-size: 115%; font-weight: bold;">Example</p><div style="margin-left: 1em;">
<p>Here is a timed karaoke line with inline-fx markup:
</p>
<pre>{\k40}zu{\k20}t{\k42}to {\k32<u>\-paint</u>}e{\k17}ga{\k45}i{\k32}te{\k26}ta {\k24<u>\-cloud</u>}yu{\k55}me
</pre>
<p>These syllables get inline-fx assigned like this:
</p>
<table>
<tr><th>Syllable</th><th>Inline-fx</th></tr>
<tr><td>zu</td><td>(blank)</td></tr>
<tr><td>t</td><td>(blank)</td></tr>
<tr><td>to&nbsp;</td><td>(blank)</td></tr>
<tr><td>e</td><td><tt>paint</tt></td></tr>
<tr><td>ga</td><td><tt>paint</tt></td></tr>
<tr><td>i</td><td><tt>paint</tt></td></tr>
<tr><td>te</td><td><tt>paint</tt></td></tr>
<tr><td>ta&nbsp;</td><td><tt>paint</tt></td></tr>
<tr><td>yu</td><td><tt>cloud</tt></td></tr>
<tr><td>me</td><td><tt>cloud</tt></td></tr>
</table>
</div></div>
<a name="Usage_in_Karaoke_Templater" id="Usage_in_Karaoke_Templater"></a><h2> <span class="mw-headline"> Usage in Karaoke Templater </span></h2>
<p>If you use <a href="Karaoke_Templater.html" title="Karaoke Templater">Karaoke Templater</a> to create effects, you can use the <i>fx</i> modifier on templates to make that template affect only syllables with a specific inline-fx. It isn't possible (directly) to match only syllables with blank inline-fx.
</p>
<div style="margin: 0.3em 2em; padding: 0.3em; padding-left: 0.8em; background: #f0f0e9; border-left: 1px solid #aaa;"><p style="margin: 0; padding-bottom: 0.3em; font-size: 115%; font-weight: bold;">Example</p><div style="margin-left: 1em;">
<p>With the sample timed karaoke from above, you could have the following templates:
</p>
<pre>template syl: {base effect applied for all syllables}
template syl <u>fx paint</u>: {overlay effect applied only to the 'paint' syllables}
template syl <u>fx cloud</u>: {overlay effect applied only to the 'cloud' syllables}
</pre>
<p>The idea here is to have a base effect and then some of the syllables get some more effects on top of that.
</p>
</div></div>
<div style="margin: 0.3em 2em; padding: 0.3em; padding-left: 0.8em; background: #f0f0e9; border-left: 1px solid #aaa;"><p style="margin: 0; padding-bottom: 0.3em; font-size: 115%; font-weight: bold;">Example</p><div style="margin-left: 1em;">
<p>It is possible to match only syllables with blank inline-fx in kara-templater by using an <i>fxgroup</i> that enables or disables basing on inline-fx. You can also use <i>fxgroup</i>s to have templates that run for multiple inline-fx.
</p>
<pre><u>code syl</u>: fxgroup.blankfx &#x3d; (syl.inline_fx &#x3d;&#x3d; "")
template syl <u>fxgroup blankfx</u>: {effect only applied on blank inline-fx syllables}
</pre>
<p>The important thing is that the code line runs per syllable and runs before any per-syllable templates that must use it.
</p>
</div></div>
<a name="Usage_in_Lua_scripts" id="Usage_in_Lua_scripts"></a><h2> <span class="mw-headline"> Usage in Lua scripts </span></h2>
<p>The inline-fx tags are parsed by <a href="Automation_4_karaskel.html#karaskel.preproc_line_text" title="Automation 4 karaskel.lua"><code>karaskel.preproc_line_text</code></a> so they will only work if you have applied at least that much karaskel pre-processing on your subtitle lines.
</p><p>The inline-fx for a syllable is then available as <code>syl.inline_fx</code>, you can compare that to a string to conditionally apply effects.
</p>
<div style="margin: 0.3em 2em; padding: 0.3em; padding-left: 0.8em; background: #f0f0e9; border-left: 1px solid #aaa;"><p style="margin: 0; padding-bottom: 0.3em; font-size: 115%; font-weight: bold;">Example</p><div style="margin-left: 1em;">
<p>In some code that runs per-syllable in your script:
</p>
<pre>if syl.inline_fx == &quot;&quot; then
    apply_base_effect(subs, meta, line, syl)
elseif syl.inline_fx == &quot;paint&quot; then
    apply_paint_effect(subs, meta, line, syl)
elseif syl.inline_fx == &quot;cloud&quot; then
    apply_cloud_effect(subs, meta, line, syl)
end</pre>
<p>Simply compare the inline-fx name to the various possibilities and run the right effect code.
</p>
</div></div>
<div style="margin: 0.3em 2em; padding: 0.3em; padding-left: 0.8em; background: #f0f0e9; border-left: 1px solid #aaa;"><p style="margin: 0; padding-bottom: 0.3em; font-size: 115%; font-weight: bold;">Example</p><div style="margin-left: 1em;">
<p>At top-level of your script:
</p>
<pre>effects = {}
effects[&quot;&quot;] = function(subs, meta, line, syl)
    -- base effect code here
end
effects.paint = function(subs, meta, line, syl)
    -- paint effect code here
end
effects.cloud = function(subs, meta, line, syl)
    -- cloud effect code here
end</pre>
<p>Then later, in some per-syllable processing code:
</p>
<pre>effects[syl.inline_fx](subs, meta, line, syl)</pre>
<p>First, a table is created and filled with functions for applying the different effects. The keys used for the table are the names of the possible inline-fx. When the effect has to be applied, the right function is looked up in the effect table and then called.
</p>
</div></div>
<p><br />
</p>
<div style="border-top: 2px solid #448; border-bottom: 1px solid #448; background: #f0f0ff; margin: 1em; padding: 0.5em;">
<div style="text-align:center; font-weight:bold; background:#ddf;"><a href="Automation.html" title="Automation">Automation 4</a></div>
<table style="width:100%; font-size: smaller;">
<tr><th>Overview:</th><td style="text-align: center; background:#f8f8ff;">
<p><a href="Automation_Manager.html" title="Automation Manager">Automation Manager</a>&nbsp;&bull; 
<a href="Running_Automation_macros.html" title="Running Automation macros">Running macros</a>&nbsp;&bull; 
<a href="Exporting.html" title="Exporting">Using export filters</a>&nbsp;&bull; 
<a href="Using_the_included_macros.html" title="Using the included macros">Standard macros</a>&nbsp;&bull; 
<a href="Overview_of_changes_from_Automation_3.html" title="Overview of changes from Automation 3">Changes from Automation 3</a>&nbsp;&bull; 
<a href="Moving_from_Automation_3.html" title="Moving from Automation 3">Moving from Automation 3</a>
</p>
</td></tr>
<tr><th><a href="Karaoke_Templater.html" title="Karaoke Templater">Karaoke Templater</a> reference:</th><td style="text-align: center; background:#f8f8ff;">
<p><a href="Karaoke_Templater_Reference__Declaring_template_and_code_lines.html" title="Karaoke Templater Reference: Declaring template and code lines">Declaring templates</a>&nbsp;&bull; 
<a href="Karaoke_Templater_Reference__Template_execution_rules_and_order.html" title="Karaoke Templater Reference: Template execution rules and order">Execution order</a>&nbsp;&bull; 
<a href="Karaoke_Templater_Reference__Template_modifiers.html" title="Karaoke Templater Reference: Template modifiers">Modifiers</a>&nbsp;&bull; 
<a href="Karaoke_Templater_Reference__Inline_variables.html" title="Karaoke Templater Reference: Inline variables">Inline-variables ($-variables)</a>&nbsp;&bull; 
<a href="Karaoke_Templater_Reference__Code_lines_and_blocks.html" title="Karaoke Templater Reference: Code lines and blocks">Code lines and blocks</a>&nbsp;&bull; 
<a href="Karaoke_Templater_Reference__Code_execution_environment.html" title="Karaoke Templater Reference: Code execution environment">Execution envirionment</a>
</p>
</td></tr>
<tr><th><a href="Lua_Reference.html" title="Lua Reference">Lua</a> reference:</th><td style="text-align: center; background:#f8f8ff;">
<p><a href="Automation_4_Lua_Registration.html" title="Automation 4 Lua Registration">Registration</a>&nbsp;&bull; 
<a href="Automation_4_Lua_Subtitle_file_interface.html" title="Automation 4 Lua Subtitle file interface">Subtitles object</a>&nbsp;&bull; 
<a href="Automation_4_Lua_Progress_reporting.html" title="Automation 4 Lua Progress reporting">Progress reporting</a>&nbsp;&bull; 
<a href="Automation_4_Lua_Configuration_dialogues.html" title="Automation 4 Lua Configuration dialogues">Config dialogues</a>&nbsp;&bull; 
<a href="Automation_4_Lua_Miscellaneous_APIs.html" title="Automation 4 Lua Miscellaneous APIs">Misc. APIs</a>&nbsp;&bull; 
<a href="Automation_4_karaskel.html" title="Automation 4 karaskel.lua">karaskel.lua</a>&nbsp;&bull; 
<a href="Automation_4_utils.html" title="Automation 4 utils.lua">utils.lua</a>&nbsp;&bull; 
<a href="Automation_4_unicode.html" title="Automation 4 unicode.lua">unicode.lua</a>&nbsp;&bull; 
cleantags.lua
</p>
</td></tr>
<tr><th>Karaskel concepts:</th><td style="text-align: center; background:#f8f8ff;">
<p><a href="Automation_4_karaskel.html#Style_table" title="Automation 4 karaskel.lua">Style tables</a>&nbsp;&bull; 
<a href="Automation_4_karaskel.html#Dialogue_line_table" title="Automation 4 karaskel.lua">Dialogue line tables</a>&nbsp;&bull; 
<a href="Automation_4_karaskel.html#Karaoke_and_furigana_syllable_tables" title="Automation 4 karaskel.lua">Syllable tables</a>&nbsp;&bull; 
<strong class="selflink">Inline effects</strong>&nbsp;&bull; 
<a href="Furigana_karaoke.html" title="Furigana karaoke">Furigana</a>
</p>
</td></tr>
</table>
</div>

<!-- 
NewPP limit report
Preprocessor node count: 87/1000000
Post-expand include size: 6393/2097152 bytes
Template argument size: 2417/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key manual:pcache:idhash:188-0!1!0!!en!2!edit=0 and timestamp 20120831140340 -->
<div class="printfooter">
Retrieved from "<a href="Karaoke_inline-fx.html">http://docs.aegisub.org/manual/Karaoke_inline-fx</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	 </div>
    </div>
    <div id="column-one">
	 <div class="portlet" id="p-logo">
	  <a style="background-image: url(images/aegisub_small.png);"
	    href="Main_Page.html"
	    title="Main Page"></a>
	 </div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="Main_Page.html">Main Page</a></li>
	     	      
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Introduction'>
	  <h5>Introduction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-What-is-Aegisub?"><a href="About.html">What is Aegisub?</a></li>
	     	      <li id="n-Highlights"><a href="Highlights.html">Highlights</a></li>
	     	      <li id="n-Credits"><a href="Credits.html">Credits</a></li>
	     	      <li id="n-Support-Aegisub"><a href="Support.html">Support Aegisub</a></li>
	     	      <li id="n-FAQ"><a href="FAQ.html">FAQ</a></li>
	     	      <li id="n-Tutorials"><a href="Tutorials.html">Tutorials</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Working with Subtitles'>
	  <h5>Working with Subtitles</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Editing-Subtitles"><a href="Editing_Subtitles.html">Editing Subtitles</a></li>
	     	      <li id="n-Exporting-Subtitles"><a href="Exporting.html">Exporting Subtitles</a></li>
	     	      <li id="n-Applying-Subtitles"><a href="Attaching_subtitles_to_video.html">Applying Subtitles</a></li>
	     	      <li id="n-Spell-Checker"><a href="Spell_Checker.html">Spell Checker</a></li>
	     	      <li id="n-Translation-Assistant"><a href="Translation_Assistant.html">Translation Assistant</a></li>
	     	      <li id="n-Paste-Over"><a href="Paste_Over.html">Paste Over</a></li>
	     	      <li id="n-Select-Lines"><a href="Select_Lines.html">Select Lines</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Typesetting'>
	  <h5>Typesetting</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Introduction"><a href="Typesetting.html">Introduction</a></li>
	     	      <li id="n-Working-with-Video"><a href="Video.html">Working with Video</a></li>
	     	      <li id="n-Editing-styles"><a href="Styles.html">Editing styles</a></li>
	     	      <li id="n-Visual-Typesetting"><a href="Visual_Typesetting.html">Visual Typesetting</a></li>
	     	      <li id="n-ASS-Override-Tags"><a href="ASS_Tags.html">ASS Override Tags</a></li>
	     	      <li id="n-Colour-Picker"><a href="Colour_Picker.html">Colour Picker</a></li>
	     	      <li id="n-Styling-Assistant"><a href="Styling_Assistant.html">Styling Assistant</a></li>
	     	      <li id="n-Resolution-Resampler"><a href="Resolution_Resampler.html">Resolution Resampler</a></li>
	     	      <li id="n-Fonts-Collector"><a href="Fonts_Collector.html">Fonts Collector</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Timing'>
	  <h5>Timing</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Working-with-Audio"><a href="Audio.html">Working with Audio</a></li>
	     	      <li id="n-Shift-times"><a href="Shift_Times.html">Shift times</a></li>
	     	      <li id="n-Timing-Post-Processor"><a href="Timing_Post-Processor.html">Timing Post-Processor</a></li>
	     	      <li id="n-Kanji-Timer"><a href="Kanji_Timer.html">Kanji Timer</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Automation'>
	  <h5>Automation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Overview"><a href="Automation.html">Overview</a></li>
	     	      <li id="n-Karaoke-Templater"><a href="Karaoke_Templater.html">Karaoke Templater</a></li>
	     	      <li id="n-Lua-Reference"><a href="Lua_Reference.html">Lua Reference</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-Miscellaneous'>
	  <h5>Miscellaneous</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Aegisub-Options"><a href="Options.html">Aegisub Options</a></li>
	     	      <li id="n-Script-Properties"><a href="Properties.html">Script Properties</a></li>
	     	      <li id="n-Attachment-Manager"><a href="Attachment_Manager.html">Attachment Manager</a></li>
	     	    </ul>
	  </div>
	</div>
		<!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
		<table width = "100%">
			<tr><td width="5%" align="left" nowrap='nowrap'></td>
				<td align="center"></td>
			<td width="5%" align="right" nowrap='nowrap'></td></tr></table>
      </div>
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.054 secs. -->  </body>

<!-- Mirrored from docs.aegisub.org/manual/Karaoke_inline-fx by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:45:22 GMT -->
</html>
