<!DOCTYPE html>
<html>

<!-- Mirrored from docs.aegisub.org/3.2/Automation/Lua/Modules/unicode/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:47:21 GMT -->
<head>
<meta charset='utf-8'>
<title>unicode - Aegisub Manual</title>
<meta content='Aegisub, Subtitles, VSFilter, Medusa, Sabbu, ' name='Keywords'>
<meta content='http://www.aegisub.org/' name='Author'>
<meta content='Copyright (C) 2012 Aegisub Project.' name='Copyright'>
<link href='index.html' rel='canonical'>
<link href="../../../../img/favicon.ico" rel="icon" type="image/ico" />
<link href="../../../../css/style-144d38ad.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>
<div class='navbar navbar-fixed-top'>
<div class='navbar-inner'>
<div class='container-fluid'>
<a class="brand" style="padding: 3px 10px" href="http://www.aegisub.org/"><img alt="Aegisub" width="82" height="33" src="../../../../img/logo-top-bar-aeef0634.png" />
</a>
<ul class='nav'>
<li>
<a href="http://www.aegisub.org/">Home</a>
</li>
<li>
<a href="http://blog.aegisub.org/">News</a>
</li>
<li>
<a href="http://www.aegisub.org/downloads/">Downloads</a>
</li>
<li class='active'>
<a href="../../../../../index.html">Manual</a>
</li>
<li>
<a href="http://devel.aegisub.org/">Bug Tracker</a>
</li>
<li>
<a href="http://forum.aegisub.org/">Forum</a>
</li>
<li>
<a href="irc://irc.rizon.net/aegisub">IRC</a>
</li>
</ul>
<ul class='nav pull-right'>
<li>
<form action='https://www.paypal.com/cgi-bin/webscr' method='post' style='padding: 13px 0 6px 0; margin: 0' target='_top'>
<input name='cmd' type='hidden' value='_s-xclick'>
<input name='encrypted' type='hidden' value='-----BEGIN PKCS7-----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-----END PKCS7-----'>
<input alt='PayPal - The safer, easier way to pay online!' border='0' name='submit' src='https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif' type='image'>
<img alt='' border='0' height='1' src='https://www.paypalobjects.com/en_US/i/scr/pixel.gif' width='1'>
</form>
</li>
<li>
<a href='http://flattr.com/thing/922938/Aegisub-Advanced-Subtitle-Editor' target='_blank'>
<img alt='Flattr this' src='http://api.flattr.com/button/flattr-badge-large.png' title='Flattr this'>
</a>
</li>
</ul>
</div>
</div>
</div>
<div class='fluid-row'>
<div class='span3'>
<ul id='manual-sidebar'>
<li class='nav-header'>Navigation</li>
<li>
<a href="../../../../Main_Page/index.html">Main Page</a>
</li>
<li class='nav-header'>Introduction</li>
<li>
<a href="../../../../About/index.html">What is Aegisub?</a>
</li>
<li>
<a href="../../../../Highlights/index.html">Highlights</a>
</li>
<li>
<a href="../../../../Credits/index.html">Credits</a>
</li>
<li>
<a href="../../../../Support/index.html">Support Aegisub</a>
</li>
<li>
<a href="../../../../FAQ/index.html">FAQ</a>
</li>
<li>
<a href="../../../../Tutorials/index.html">Tutorials</a>
</li>
<li class='nav-header'>Working with Subtitles</li>
<li>
<a href="../../../../Editing_Subtitles/index.html">Editing Subtitles</a>
</li>
<li>
<a href="../../../../Exporting/index.html">Exporting Subtitles</a>
</li>
<li>
<a href="../../../../Attaching_subtitles_to_video/index.html">Applying Subtitles</a>
</li>
<li>
<a href="../../../../Spell_Checker/index.html">Spell Checker</a>
</li>
<li>
<a href="../../../../Translation_Assistant/index.html">Translation Assistant</a>
</li>
<li>
<a href="../../../../Paste_Over/index.html">Paste Over</a>
</li>
<li>
<a href="../../../../Select_Lines/index.html">Select Lines</a>
</li>
<li class='nav-header'>Typesetting</li>
<li>
<a href="../../../../Typesetting/index.html">Introduction</a>
</li>
<li>
<a href="../../../../Video/index.html">Working with Video</a>
</li>
<li>
<a href="../../../../Styles/index.html">Editing styles</a>
</li>
<li>
<a href="../../../../Visual_Typesetting/index.html">Visual Typesetting</a>
</li>
<li>
<a href="../../../../ASS_Tags/index.html">ASS Override Tags</a>
</li>
<li>
<a href="../../../../Colour_Picker/index.html">Colour Picker</a>
</li>
<li>
<a href="../../../../Styling_Assistant/index.html">Styling Assistant</a>
</li>
<li>
<a href="../../../../Resolution_Resampler/index.html">Resolution Resampler</a>
</li>
<li>
<a href="../../../../Fonts_Collector/index.html">Fonts Collector</a>
</li>
<li class='nav-header'>Timing</li>
<li>
<a href="../../../../Audio/index.html">Working with Audio</a>
</li>
<li>
<a href="../../../../Timing/index.html">Timing subtitles to audio</a>
</li>
<li>
<a href="../../../../Shift_Times/index.html">Shift times</a>
</li>
<li>
<a href="../../../../Timing_Post-Processor/index.html">Timing Post-Processor</a>
</li>
<li>
<a href="../../../../Kanji_Timer/index.html">Kanji Timer</a>
</li>
<li class='nav-header'>Automation</li>
<li>
<a href="../../../index.html">Overview</a>
</li>
<li>
<a href="../../../Karaoke_Templater/index.html">Karaoke Templater</a>
</li>
<li>
<a href="../../index.html">Lua Reference</a>
</li>
<li class='nav-header'>Miscellaneous</li>
<li>
<a href="../../../../Options/index.html">Aegisub Options</a>
</li>
<li>
<a href="../../../../Properties/index.html">Script Properties</a>
</li>
<li>
<a href="../../../../Attachment_Manager/index.html">Attachment Manager</a>
</li>
</ul>
</div>
<div class='span9' id='manual-body'>
<h1 class='page-header'><a href="../../../index.html">Automation</a> / <a href="../../index.html">Lua</a> / <a href="../index.html">Modules</a> / unicode</h1>
<p>The <code>unicode</code> module for Automation 4 Lua contains various helper functions for working with UTF-8 encoded text.</p>

<h2 id="usage">Usage</h2>
<p>Import this module with <code><span class="n">unicode</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">'</span><span class="s">aegisub.unicode'</span></code>.</p>

<h2 id="unicodecharwidth">unicode.charwidth</h2>
<p>Synopsis: <code><span class="n">width</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">charwidth</span><span class="p">(</span><span class="n">instring</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code></p>

<p>Returns the number of bytes occupied by the UTF-8 encoded code points starting at position <code>index</code> in <code>instring</code>.
The character pointed to is assumed to be a prefix byte (i.e. the first byte of the code points).</p>

<p>The <code>index</code> parameter is optional abd defaults to 1 (one) when left out, meaning the width of the first character in <code>instring</code> will be returned.</p>

<h2 id="unicodechars">unicode.chars</h2>
<p>Synopsis: <code><span class="k">for</span> <span class="n">char</span> <span class="k">in</span> <span class="n">unicode</span><span class="p">.</span><span class="n">chars</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span> <span class="k">do</span> <span class="o">...</span> <span class="k">end</span></code></p>

<p>Returns an iterator function for looping over all code points in the given UTF-8 encoded string.
For each iteration of the loop, <code>char</code> will contain a string representing the next code point in the string. This string may be more than one byte long.</p>

<h2 id="unicodelen">unicode.len</h2>
<p>Synopsis: <code><span class="n">length</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">len</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span></code></p>

<p>Determine the length in code points of the given UTF-8 encoded string.</p>

<p>Be aware that this function does not run in constant time, but in linear time (O(N)) proportional to the number of Unicode code points in <code>instring</code>.</p>

<h2 id="unicodecodepoint">unicode.codepoint</h2>
<p>Synopsis: <code><span class="n">val</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">codepoint</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span></code></p>

<p>Read the first unicode codepoint from <code>instring</code>.</p>

<h2 id="unicodetouppercase">unicode.to_upper_case</h2>
<p>Synopsis: <code><span class="n">upper</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">to_upper_case</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span></code></p>

<p>Convert a string to upper case.
This function handles accents, non-latin scripts, and the like.</p>

<h2 id="unicodetolowercase">unicode.to_lower_case</h2>
<p>Synopsis: <code><span class="n">lower</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">to_lower_case</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span></code></p>

<p>Convert a string to lower case.
This function handles accents, non-latin scripts, and the like.</p>

<h2 id="unicodetofoldcase">unicode.to_fold_case</h2>
<p>Synopsis: <code><span class="n">folded</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">.</span><span class="n">to_fold_case</span><span class="p">(</span><span class="n">instring</span><span class="p">)</span></code></p>

<p>Convert a string to fold case.
This is similar to lower case, but is locale-insensitive and gives better results for case-insensitive comparisons.</p>

<div class='navbox'>
<div><a href="../../../index.html">Automation</a></div>
<table>
<tr>
<th>Overview:</th>
<td><a href="../../../Manager/index.html">Automation Manager</a> • <a href="../../../Running_macros/index.html">Running macros</a> • <a href="../../../../Exporting/index.html">Using export filters</a> • <a href="../../../Included_macros/index.html">Standard macros</a></td>
</tr>
<tr>
<th><a href="../../../Karaoke_Templater/index.html">Karaoke Templater</a> reference:</th>
<td><a href="../../../Karaoke_Templater/Declaring_template_and_code_lines/index.html">Declaring templates</a> • <a href="../../../Karaoke_Templater/Template_execution_rules_and_order/index.html">Execution order</a> • <a href="../../../Karaoke_Templater/Template_modifiers/index.html">Modifiers</a> • <a href="../../../Karaoke_Templater/Inline_variables/index.html">Inline-variables ($-variables)</a> <br> <a href="../../../Karaoke_Templater/Code_lines_and_blocks/index.html">Code lines and blocks</a> • <a href="../../../Karaoke_Templater/Code_execution_environment/index.html">Execution envirionment</a></td>
</tr>
<tr>
<th><a href="../../index.html">Lua API</a>  reference:</th>
<td><a href="../../Registration/index.html">Registration</a> • <a href="../../Subtitle_file_interface/index.html">Subtitles object</a> • <a href="../../Progress_reporting/index.html">Progress reporting</a> • <a href="../../Dialogs/index.html">Dialogs</a> • <a href="../../Miscellaneous_APIs/index.html">Misc. APIs</a></td>
</tr>
<tr>
<th><a href="../index.html">Lua Modules</a>:</th>
<td><a href="../karaskel.lua/index.html">karaskel.lua</a> • <a href="../util/index.html">util</a> • <a href="index.html">unicode</a> • <a href="#">cleantags.lua</a> • <a href="../clipboard/index.html">clipboard</a> • <a href="../re/index.html">re</a></td>
</tr>
<tr>
<th>Karaskel concepts:</th>
<td><a href="../karaskel.lua/index.html#Style_table">Style tables</a> • <a href="../karaskel.lua/index.html#Dialogue_line_table">Dialogue line tables</a> • <a href="../karaskel.lua/index.html#Karaoke_and_furigana_syllable_tables">Syllable tables</a> • <a href="../../../../Karaoke_inline-fx/index.html">Inline effects</a> • <a href="../../../../Furigana_karaoke/index.html">Furigana</a></td>
</tr>
</table>
</div>

</div>
</div>

<footer class='footer span12 pagination-centered'>
<p>
Hosting kindly provided by
<a href='http://www.networkredux.com/'>NetworkRedux</a>
</p>
</footer>
</body>

<!-- Mirrored from docs.aegisub.org/3.2/Automation/Lua/Modules/unicode/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Jul 2020 19:47:21 GMT -->
</html>

