<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script>(()=>{Object.keys(localStorage).forEach(function(e){/^global-alert-/.test(e)&&document.documentElement.setAttribute("data-global-alert","closed")})})()</script><link rel=stylesheet href=/main.7e08a0ca63bce71c0e427b7ece17093ff91a357434cc35d505ac54e209cde7b2dc3e95e76a4f2fdfc8beff1da3a303a9d4dcd1ace28b9acbfa5331557c3c5bcc.css integrity="sha512-fgigymO85xwOQnt+zhcJP/kaNXQ0zDXVBaxU4gnN57LcPpXnak8v38i+/x2jowOp1NzRrOKLmsv6UzFVfDxbzA==" crossorigin=anonymous><noscript><style>.collapse:not(.show){display:block}button.btn-toggle{cursor:unset}button.btn-toggle::before{display:none}.doks-subnavbar{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Kumaji explained - Aegisub</title><meta name=description content="Kumaji is an advanced subtitle rendering engine, in development.
At the time of writing this, Kumaji does not render any subtitles whatsoever and is in general in a very early stage.
There are several reasons I started the Kumaji project, I will try to cover them in this post.
The name
First what does &amp;ldquo;Kumaji&amp;rdquo; even mean? It&amp;rsquo;s derived from Japanese where it would be written クマジ. If you reverse that, you get ジマク, &amp;ldquo;jimaku&amp;rdquo; (字幕), which means subtitles."><link rel=canonical href=/blog/kumaji-explained/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Kumaji explained"><meta property="og:description" content="Kumaji is an advanced subtitle rendering engine, in development.
At the time of writing this, Kumaji does not render any subtitles whatsoever and is in general in a very early stage.
There are several reasons I started the Kumaji project, I will try to cover them in this post.
The name
First what does &ldquo;Kumaji&rdquo; even mean? It&rsquo;s derived from Japanese where it would be written クマジ. If you reverse that, you get ジマク, &ldquo;jimaku&rdquo; (字幕), which means subtitles."><meta property="og:url" content="/blog/kumaji-explained/"><meta property="og:site_name" content="Aegisub"><meta property="article:published_time" content="2009-02-10T02:59:00+00:00"><meta property="article:modified_time" content="2009-02-21T13:30:17+00:00"><meta property="og:image" content="/img/logo.png"><meta property="og:image:alt" content="Aegisub"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@aegisub"><meta name=twitter:creator content><meta name=twitter:title content="Kumaji explained"><meta name=twitter:description content><meta name=twitter:image content="/img/logo.png"><meta name=twitter:image:alt content="Kumaji explained"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"/#/schema/organization/1","name":"Aegisub","url":"/","sameAs":["https://twitter.com/aegisub","https://github.com/TypesettingTools/Aegisub"],"logo":{"@type":"ImageObject","@id":"/#/schema/image/1","url":"/logo-aegisub.png","width":512,"height":512,"caption":"Aegisub"},"image":{"@id":"/#/schema/image/1"}},{"@type":"WebSite","@id":"/#/schema/website/1","url":"/","name":"Aegisub","description":"Aegisub is a free, cross-platform open source tool for creating and modifying subtitles. Aegisub makes it quick and easy to time subtitles to audio, and features many powerful tools for styling them, including a built-in real-time video preview.","publisher":{"@id":"/#/schema/organization/1"}},{"@type":"WebPage","@id":"/blog/kumaji-explained/","url":"/blog/kumaji-explained/","name":"Kumaji explained","description":"","isPartOf":{"@id":"/#/schema/website/1"},"about":{"@id":"/#/schema/organization/1"},"datePublished":"2009-02-10T02:59:00CET","dateModified":"2009-02-21T13:30:17CET","breadcrumb":{"@id":"/blog/kumaji-explained/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"/blog/kumaji-explained/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["/blog/kumaji-explained/"]}]},{"@type":"BreadcrumbList","@id":"/blog/kumaji-explained/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"/","url":"/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"/blogkumaji-explained/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"/#/schema/article/1","headline":"Kumaji explained","description":"","isPartOf":{"@id":"/blog/kumaji-explained/"},"mainEntityOfPage":{"@id":"/blog/kumaji-explained/"},"datePublished":"2009-02-10T02:59:00CET","dateModified":"2009-02-21T13:30:17CET","author":{"@id":"/#/schema/person/2"},"publisher":{"@id":"/#/schema/organization/1"},"image":{"@id":"/blog/kumaji-explained/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"/blog/kumaji-explained/#/schema/image/2","url":"/img/logo.png","contentUrl":"/img/logo.png","caption":"Kumaji explained"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=/site.webmanifest></head><body class="blog single"><div id=announcement data-id=global-alert-2857b76439548ca539fee5ff8038aa86 class="alert alert-primary alert-dismissible fade show text-lg-center" role=alert><a href=/blog/aegisub-3.4.0-released/>Aegisub 3.4.0 released!</a>
<button type=button class=btn-close data-bs-dismiss=alert aria-label=Close></button></div><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Aegisub>Aegisub</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Aegisub</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=/downloads/>Downloads</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/docs/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub/issues>Bug Tracker</a></li><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-4"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub aria-label="View repository on GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
EN
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/blog/kumaji-explained/>English</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh-cn hreflang=zh-cn lang=zh-cn>简体中文</a></li></ul></div></nav></header></div><div class="wrap container-fluid" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>Kumaji explained</h1><p><small>Posted February 10, 2009 by <a class="stretched-link position-relative" href=/contributors/jfs/>jfs</a>&nbsp;&dash;&nbsp;<strong>4&nbsp;min read</strong></small><p></div><p class=lead></p><p>Kumaji is an advanced subtitle rendering engine, in development.</p><p>At the time of writing this, Kumaji does not render any subtitles whatsoever and is in general in a very early stage.</p><p>There are several reasons I started the Kumaji project, I will try to cover them in this post.</p><p><strong>The name</strong></p><p>First what does &ldquo;Kumaji&rdquo; even mean? It&rsquo;s derived from Japanese where it would be written クマジ. If you reverse that, you get ジマク, &ldquo;jimaku&rdquo; (字幕), which means subtitles. Also, Kumaji can be understood as 熊字, &ldquo;bear&rdquo; + &ldquo;writing&rdquo;, hence Kumaji has a bear for a mascot! (Lots of people have suggested using Pedobear, this is wrong, I don&rsquo;t want to have that association.)</p><p>&ldquo;Kumaji&rdquo; should be reasonably easy to pronounce for most people and as far as I know it doesn&rsquo;t have the potential to offend people, like &ldquo;libass&rdquo; might have. The name is also format-agnostic like the actual renderer will be.</p><p><strong>The goals</strong></p><p>The key goals are:</p><ol><li><p>Portable code without sacrificing compatibility</p></li><li><p>Maintainable and hackable code</p></li><li><p>Speed</p></li><li><p>Flexibility</p></li></ol><p>Portability is the first and foremost goal. All current subtitle renderers have major problems with this. Those that do compile and work on multiple platforms (<em>libass</em> and the abandoned <em>asa</em>) are strongly tied to details of text and font handling on UNIX-like systems, which means they fail on Windows and Mac platforms because those have much different ways of handling fonts which FontConfig doesn&rsquo;t wrap properly or over-complicates. The result is very sub-optimal. VSFilter depends on not just Win32 (and Wine doesn&rsquo;t implement everything it requires yet) as well as MFC and COM. Perian&rsquo;s subtitle rendrer is Objective-C and entirely dependant on Cocoa text API&rsquo;s. Kumaji will achieve portability by plugging in platform-specific code where appropriate. The motto would be <em>doing the right thing on each platform, whatever the cost</em>.</p><p>Maintainable and hackable code is important. It must be possible to jump into the code without having a great understanding of the entire system beforehand, and it must be possible to learn good techniques from reading the code. The code must be well-commented or self-explanatory all around. (Portions of the code with poor, little or no explanations should be treated as bugs and reported.) VSFilter is a prime example of how I do not want the code to end up.</p><p>Speed is obviously important, to a certain degree. Reasonable subtitle scripts should render in realtime so Kumaji can be used for softsubbing. This may mean writing some critical routines in multiple versions optimised for different systems, using SIMD intrinsics or hand-optimised assembly code. However, good algorithms and data structures still take priority over SIMD and assembly tricks.</p><p>Finally, Kumaji must be flexible. It should be possible to implement support for new subtitle formats without providing more than a parser for them. If a format requires special rendering support not present, it must be possible to add that without taking the entire system apart and jeopardising the previous goals. It should also be possible to use Kumaji as a framework to write custom special-purpose renderers. For example, one can imagine creating a Lua interface for Kumaji&rsquo;s internal functions and use that for scripting advanced karaoke effects.</p><p><strong>Help wanted!</strong></p><p>Currently, Kumaji is pretty much my own pet project, but I would really like to have some help. What&rsquo;s needed right now is data structure design. If you want to help I expect you to have some knowledge of digital typography, the intricacies of Unicode complex scripts and the Bidi algorithm, OpenType, as well as general data structure and algorithm design. Or you should be have or be able to take an interest in those topics and read lots and lots about them! (It&rsquo;s interesting stuff, really!)</p><p>Kumaji is being written in C++ using just the STL (no TR1 libraries, boost or otherwise) so if you want to help reviewing or writing code you should be familiar with that.</p><p>The project is being hosted at SourceForge.net under the name <a href=http://sourceforge.net/projects/kumaji/>kumaji</a>.</p></article></div></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a> and <a class=text-muted href=https://getdoks.org/>Doks</a>.<br>Copyright (c) AegiSite <a href=https://github.com/Aegisub/aegisite/graphs/contributors>contributors</a>.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=/js/bootstrap.min.44fc78ffe68ed681865871fdec9750ca44c6febe429bf0779d114896edde0f92b92891b983ef933484a02a2c7ceb3d1fa6392c39179350ad04197a153a2db970.js integrity="sha512-RPx4/+aO1oGGWHH97JdQykTG/r5Cm/B3nRFIlu3eD5K5KJG5g++TNISgKix86z0fpjksOReTUK0EGXoVOi25cA==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.ce39cca46643b8f4ca5d8866112a6450f305ee8373d516503859173f9f0bed10e50403f8e8b63fb61e2248e547d92ff356a1a02eb7a955bcedffff00ac246b98.js integrity="sha512-zjnMpGZDuPTKXYhmESpkUPMF7oNz1RZQOFkXP58L7RDlBAP46LY/th4iSOVH2S/zVqGgLrepVbzt//8ArCRrmA==" crossorigin=anonymous defer></script>
<script src=/main.min.a33bc2449cbb742040fdec17b8211fec297914dfe0ec540a9c14ec20318334b896421c46f3e42b9cba70003825423aa03f8997bac70f2e02e3555fe631d127ae.js integrity="sha512-ozvCRJy7dCBA/ewXuCEf7Cl5FN/g7FQKnBTsIDGDNLiWQhxG8+QrnLpwADglQjqgP4mXuscPLgLjVV/mMdEnrg==" crossorigin=anonymous defer></script></body></html>