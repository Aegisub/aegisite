<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://aegisub.github.io/aegisite/main.a069f92f6400c25f9338ec05c5dc67c53682e49a491b3de5e090ded9a734d8fbd5e61c73163c250c0406bf70bcbbc85a2d3b625a7123172a8c4dc9e35b243c51.css integrity="sha512-oGn5L2QAwl+TOOwFxdxnxTaC5JpJGz3l4JDe2ac02PvV5hxzFjwlDAQGv3C8u8haLTtiWnEjFyqMTcnjWyQ8UQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>字幕文件接口 - Aegisub</title><meta name=description content="This page describes the subtitle file interface use in Automation 4 Lua scripts to manipulate subtitle files.
此页面描述了用于 Automation 4 Lua 脚本中操作字幕文件的字幕文件接口。
There is one special object (the subtitles user data object) which has a number of functions, and a number of table formats defined.
这里定义了一个拥有多个方法（function）、表格式（table format）定义的特殊对象（subtitles用户数据对象）。
subtitles 对象 # Most Automation 4 Lua feature functions are passed a subtitles object when called. This object is used to obtain data from and manipulate the subtitles the feature is being applied on."><link rel=canonical href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="og:title" content="字幕文件接口"><meta property="og:description" content="This page describes the subtitle file interface use in Automation 4 Lua scripts to manipulate subtitle files.
此页面描述了用于 Automation 4 Lua 脚本中操作字幕文件的字幕文件接口。
There is one special object (the subtitles user data object) which has a number of functions, and a number of table formats defined.
这里定义了一个拥有多个方法（function）、表格式（table format）定义的特殊对象（subtitles用户数据对象）。
subtitles 对象 # Most Automation 4 Lua feature functions are passed a subtitles object when called. This object is used to obtain data from and manipulate the subtitles the feature is being applied on."><meta property="og:url" content="https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/"><meta property="og:site_name" content="Aegisub"><meta property="og:image" content="https://aegisub.github.io/aegisite/img/logo.png"><meta property="og:image:alt" content="Aegisub"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@aegisub"><meta name=twitter:creator content><meta name=twitter:title content="字幕文件接口"><meta name=twitter:description content><meta name=twitter:image content="https://aegisub.github.io/aegisite/img/logo.png"><meta name=twitter:image:alt content="字幕文件接口"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://aegisub.github.io/#/schema/organization/1","name":"Aegisub","url":"https://aegisub.github.io/","sameAs":["https://twitter.com/aegisub","https://github.com/Aegisub/Aegisub"],"logo":{"@type":"ImageObject","@id":"https://aegisub.github.io/#/schema/image/1","url":"https://aegisub.github.io/logo-aegisub.png","width":512,"height":512,"caption":"Aegisub"},"image":{"@id":"https://aegisub.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://aegisub.github.io/#/schema/website/1","url":"https://aegisub.github.io/","name":"Aegisub","description":"Aegisub 是一款自由、跨平台的开源字幕编辑软件。 它能让您轻松且高效地完成时间轴的制作， 并利用内置的各种实用工具来调整字幕的样式， 还可以进行实时的视频预览。","publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/","name":"字幕文件接口","description":"","isPartOf":{"@id":"https://aegisub.github.io/#/schema/website/1"},"about":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/#/schema/image/2"},"inLanguage":"zh_CN","potentialAction":[{"@type":"ReadAction","target":["https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/"]}]},{"@type":"BreadcrumbList","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/","url":"https://aegisub.github.io/aegisite/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/","url":"https://aegisub.github.io/aegisite/zh-cn/","name":"Zh Cn"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/","name":"3.2"}},{"@type":"ListItem","position":5,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/","name":"Automation"}},{"@type":"ListItem","position":6,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/","name":"Lua"}},{"@type":"ListItem","position":7,"item":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://aegisub.github.io/#/schema/article/1","headline":"字幕文件接口","description":"","isPartOf":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/"},"mainEntityOfPage":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://aegisub.github.io/#/schema/person/2"},"publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"image":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://aegisub.github.io/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/#/schema/image/2","url":"https://aegisub.github.io/aegisite/img/logo.png","contentUrl":"https://aegisub.github.io/aegisite/img/logo.png","caption":"字幕文件接口"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://aegisub.github.io/aegisite/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aegisub.github.io/aegisite/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aegisub.github.io/aegisite/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://aegisub.github.io/aegisite/site.webmanifest></head><body class="docs single"><div class=sticky-lg-top><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=https://aegisub.github.io/aegisite/zh-cn/ aria-label=Aegisub>Aegisub</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://aegisub.github.io/aegisite/zh-cn/>Aegisub</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/zh-cn/downloads/main/>下载</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/zh-cn/docs/>文档</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub/issues>Bug 追踪</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/zh-cn/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
ZH
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/>简体中文</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=https://aegisub.github.io/aegisite/docs/3.2/automation/lua/subtitle_file_interface/ hreflang=en lang=en>English</a></li></ul></div></nav></header></div><nav class="doks-subnavbar py-2 sticky-lg-top d-lg-none" aria-label="Secondary navigation"><div class="container-fluid d-flex align-items-md-center"><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed ms-auto" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
导航</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/main_page/>主页</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
介绍</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/about/>Aegisub 是什么？</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/overview/>概述</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/highlights/>亮点</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/credits/>贡献者</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/aegisub_manual/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/support/>支持 Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
教程</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/karaoke_timing_tutorial/>卡拉OK计时</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/karaoke_inline-fx/>卡拉OK内联特效</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/furigana_karaoke/>注音卡拉OK</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
制作字幕</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/editing_subtitles/>编辑字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/exporting/>导出字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/attaching_subtitles_to_video/>将字幕加到视频上</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/spell_checker/>拼写检查器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/translation_assistant/>翻译助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/paste_over/>选择性粘贴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/select_lines/>选择多行</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
排版</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/typesetting/>介绍</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/video/>视频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/styles/>样式</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/visual_typesetting/>可视化排版</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/ass_tags/>ASS标签</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/colour_picker/>颜色选择器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/styling_assistant/>样式助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/resolution_resampler/>重设分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/fonts_collector/>字体收集器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
时间轴</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/audio/>音频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/timing/>制作时间轴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/shift_times/>平移时间</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/timing_post-processor/>时间后续处理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/kanji_timer/>汉字计时器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
自动化</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/>自动化</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
卡拉OK模版执行器</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/declaring_template_and_code_lines/>声明template行和code行</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/template_execution_rules_and_order/>卡拉OK模板执行环境和顺序</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/template_modifiers/>模版修饰语</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/inline_variables/>内联变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/code_lines_and_blocks/>Code行 和 Code区</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial_1/>教程一</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial_2/>教程二</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua 相关</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/>注册</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/>字幕文件接口</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/progress_reporting/>进度报告</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/dialogs/>对话框</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/miscellaneous_apis/>杂项API</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua模块</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/clipboard/>剪贴板</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/manager/>自动化脚本管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/running_macros/>运行宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/included_macros/>附带的宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/sidebar/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
杂项</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/options/>选项</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/autosave/>自动保存</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/aegisub_path_specifiers/>Aegisub路径变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/properties/>脚本配置</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/script_resolution/>脚本分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/attachment_manager/>附件管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/commands/>Commands</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
导航</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/main_page/>主页</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
介绍</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/about/>Aegisub 是什么？</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/overview/>概述</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/highlights/>亮点</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/credits/>贡献者</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/aegisub_manual/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/support/>支持 Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
教程</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/karaoke_timing_tutorial/>卡拉OK计时</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/karaoke_inline-fx/>卡拉OK内联特效</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/furigana_karaoke/>注音卡拉OK</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
制作字幕</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/editing_subtitles/>编辑字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/exporting/>导出字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/attaching_subtitles_to_video/>将字幕加到视频上</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/spell_checker/>拼写检查器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/translation_assistant/>翻译助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/paste_over/>选择性粘贴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/select_lines/>选择多行</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
排版</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/typesetting/>介绍</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/video/>视频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/styles/>样式</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/visual_typesetting/>可视化排版</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/ass_tags/>ASS标签</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/colour_picker/>颜色选择器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/styling_assistant/>样式助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/resolution_resampler/>重设分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/fonts_collector/>字体收集器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
时间轴</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/audio/>音频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/timing/>制作时间轴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/shift_times/>平移时间</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/timing_post-processor/>时间后续处理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/kanji_timer/>汉字计时器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
自动化</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/>自动化</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
卡拉OK模版执行器</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/declaring_template_and_code_lines/>声明template行和code行</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/template_execution_rules_and_order/>卡拉OK模板执行环境和顺序</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/template_modifiers/>模版修饰语</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/inline_variables/>内联变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/code_lines_and_blocks/>Code行 和 Code区</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial_1/>教程一</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/karaoke_templater/tutorial_2/>教程二</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua 相关</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/>注册</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/subtitle_file_interface/>字幕文件接口</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/progress_reporting/>进度报告</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/dialogs/>对话框</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/miscellaneous_apis/>杂项API</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua模块</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/clipboard/>剪贴板</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/manager/>自动化脚本管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/running_macros/>运行宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/included_macros/>附带的宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/sidebar/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
杂项</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/options/>选项</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/autosave/>自动保存</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/aegisub_path_specifiers/>Aegisub路径变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/properties/>脚本配置</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/script_resolution/>脚本分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/attachment_manager/>附件管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/commands/>Commands</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#subtitles-对象>subtitles 对象</a><ul><li><a href=#获取总行数>获取总行数</a></li><li><a href=#读取行>读取行</a></li><li><a href=#附加行>附加行</a></li><li><a href=#insert-line>Insert line</a></li><li><a href=#replace-line>Replace line</a></li><li><a href=#delete-line>Delete line</a></li><li><a href=#creating-an-undo-point>Creating an undo point</a></li></ul></li><li><a href=#line-data-tables>Line data tables</a><ul><li><a href=#info-class><code>info</code> class</a></li><li><a href=#style-class><code>style</code> class</a></li><li><a href=#dialogue-class><code>dialogue</code> class</a></li><li><a href=#unknown-class><code>unknown</code> class</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>字幕文件接口</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#subtitles-对象>subtitles 对象</a><ul><li><a href=#获取总行数>获取总行数</a></li><li><a href=#读取行>读取行</a></li><li><a href=#附加行>附加行</a></li><li><a href=#insert-line>Insert line</a></li><li><a href=#replace-line>Replace line</a></li><li><a href=#delete-line>Delete line</a></li><li><a href=#creating-an-undo-point>Creating an undo point</a></li></ul></li><li><a href=#line-data-tables>Line data tables</a><ul><li><a href=#info-class><code>info</code> class</a></li><li><a href=#style-class><code>style</code> class</a></li><li><a href=#dialogue-class><code>dialogue</code> class</a></li><li><a href=#unknown-class><code>unknown</code> class</a></li></ul></li></ul></nav></div></nav><p>This page describes the <strong>subtitle file interface</strong> use in Automation 4
Lua scripts to manipulate subtitle files.</p><p>此页面描述了用于 Automation 4 Lua 脚本中操作字幕文件的<strong>字幕文件接口</strong>。</p><p>There is one special object (the <strong>subtitles</strong> user data object) which
has a number of functions, and a number of table formats defined.</p><p>这里定义了一个拥有多个方法（function）、表格式（table
format）定义的特殊对象（<strong>subtitles</strong>用户数据对象）。</p><h2 id=subtitles-对象>subtitles 对象 <a href=#subtitles-%e5%af%b9%e8%b1%a1 class=anchor aria-hidden=true>#</a></h2><p>Most Automation 4 Lua feature functions are passed a <strong>subtitles
object</strong> when called. This object is used to obtain data from and
manipulate the subtitles the feature is being applied on.</p><p><strong>subtitles对象</strong>会在多数基于 Automation 4 Lua
的函数在被调用时被传入。此对象用于在应用功能时获得相应数据并操作字幕文件。</p><p>A subtitles object can have two special properties depending on the
context it is created for:</p><p>一个subtitles对象可以根据使用场景来定义两种特殊属性：</p><dl><dt>只读</dt><dd>Some feature functions must not be allowed to modify the subtitle
file at all. This includes for example <a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#macrovalidationfunction>macro validation
functions</a> and
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#_export_filter_configuration_panel_provider>export filter configuration panel
providers</a>,
because this would be outside user expectations.</dd><dd>一些功能函数理应不允许其修改字幕文件。这种函数包括例如
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#macrovalidationfunction>宏验证函数</a>
以及
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#_export_filter_configuration_panel_provider>导出滤镜配置面板提供程序</a>，因为可能会有与用户预期不符的效果。</dd><dt>允许撤消点</dt><dd>Only <a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#macroprocessingfunction>macro processing
functions</a> can
set undo points, as it makes no sense to do so at any other time.</dd></dl><p>仅有<a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/#macroprocessingfunction>宏处理函数</a>可设置撤销点，因为在其他任何时候设置没有意义。</p><p>To allow the most flexibility, the subtitles object represents a
complete ASS format file, line by line, including all meta-lines such as
section headers.</p><p>为提供最大的灵活性，subtitles
对象可表示完整的ASS格式文件的每一行，包括meta行的内容，例如每个section的标题。</p><p>The subtitles object supports the following operations:</p><p>subtitles 对象支持如下的操作：</p><ul><li>Retrieve number of lines</li><li>Read line</li><li>Append line (to end of file)</li><li>Insert line (at arbitrary position in file)</li><li>Replace line</li><li>Delete line</li><li>Create undo point</li></ul><br><ul><li>获取总行数</li><li>读取行</li><li>附加行（至文件末尾）</li><li>插入行（至文件任意位置）</li><li>删除行</li><li>创建撤销点</li></ul><p>These operations are described in detail below. In all operation
synopses and examples, <code>subtitles</code> is used for name of the subtitles
object being operated on.</p><p>下面会详细描述这些操作。在所有操作摘要及示例中，<code>subtitles</code>是正在操作的
subtitles 对象的名称。</p><h3 id=获取总行数>获取总行数 <a href=#%e8%8e%b7%e5%8f%96%e6%80%bb%e8%a1%8c%e6%95%b0 class=anchor aria-hidden=true>#</a></h3><p>摘要:</p><ul><li><code>num_lines = #subtitles</code></li><li><code>num_lines = subtitles.n</code></li></ul><p>This operation retrieves the total number of lines in the subtitle file
currently. This number only changes by using the other operations on the
subtitle object. It cannot change spontaneously during the execution of
a script.</p><p>此操作可获取当前字幕文件中的总行数。此数字仅会在对 subtitle
对象使用其他操作时更改，它不会在执行脚本时自发更改。</p><p>Note that this is not a constant-time lookup, but lua does cache the
value if used in <code>for i = 1, #subs</code>.</p><p>注意这个查找所消耗的时间不是常数阶的，但在 <code>for i = 1, #subs</code>
中使用的话Lua会缓存这个值。</p><dl><dt><code>num_lines</code> (<code>number</code>)</dt><dd>Number of lines in the subtitle file.</dd><dd>字幕文件的行数。</dd></dl><p>The first syntax is the preferred one, per normal Lua 5.1 coding style.</p><p>根据正常的Lua 5.1编码风格，第一个写法是首选。</p><h3 id=读取行>读取行 <a href=#%e8%af%bb%e5%8f%96%e8%a1%8c class=anchor aria-hidden=true>#</a></h3><p>摘要：<code>line = subtitles[i]</code></p><p>This retrieves the indexed line and creates a new table object with data
about it.</p><p>这会读取索引行并创建一个新的表对象来存储此行的数据。</p><dl><dt><code>line</code> (<code>table</code>)</dt><dd>Table with data about the retrieved line.</dd><dd>包含读取行数据的一个表。</dd><dt><code>i</code> (<code>number</code>)</dt><dd>Index into the subtitles file of the line number to retrieve. This
is one-based, i.e. the first line in the file has index 1.</dd><dd>获取的行位于字幕文件中的行号。这个值始于1，即文件中第一行的索引是1。</dd></dl><p>Aegisub internally stores the subtitle file as a linked list, which
means that random access is slow, but sequential access is fast. While
Automation 4 Lua presents the subtitles as if it was an array, it
internally maintains a cursor used to optimise for sequential access. It
is faster to access a line with an index close to the one you last
accessed than to access one further away. It is always fast to access
lines near the beginning or end of the file.</p><p>Aegisub内部将字幕文件存储为一个链表，这意味着随机访问慢，但顺序访问快。虽然
Automation 4 Lua 将 subtitles
表示为数组，但它内部维护着一个用于优化顺序访问的指针。访问索引接近上次访问的行会比访问远离的行更快。访问文件开头或结尾附近的行时总会很快。</p><h3 id=附加行>附加行 <a href=#%e9%99%84%e5%8a%a0%e8%a1%8c class=anchor aria-hidden=true>#</a></h3><p>摘要：</p><ul><li><code>subtitles[0] = line</code></li><li><code>subtitles.append(line)</code></li><li><code>subtitles.append(line1, line2, ...)</code></li></ul><p>Append one or more lines to the end of the appropriate section of the
subtitles file. If the section does not exist, it will be created. In
the first syntax, it is the number 0 (zero) used for index. (Setting
index 0 causes an append operation.)</p><p>附加一行或多行至字幕文件指定的section末尾。如果相应section不存在则会被创建。在第一种写法里，数字0（零）被用作索引。（设置索引为0即为附加操作。）</p><p>The third syntax supports appending multiple lines with one single
operation.</p><p>第三个写法支持一次操作附加多行。</p><dl><dt><code>line</code> (<code>table</code>)</dt><dd>The line object table to append to the subtitles file.</dd><dd>附加至字幕文件的行的对象表。</dd></dl><p>The latter function-call syntax is preferred for readability. The table
index setting syntax is slightly faster.</p><p>后两个函数调用写法更利于可读性。表索引写法会稍微快一点。</p><p>Appending a line does not move the cursor otherwise used to optimise
sequential access.</p><p>附加行不会改变之前用于优化顺序读取的指针。</p><h3 id=insert-line>Insert line <a href=#insert-line class=anchor aria-hidden=true>#</a></h3><p>Synopsis:</p><ul><li><code>subtitles[-i] = line</code></li><li><code>subtitles.insert(i, line)</code></li><li><code>subtitles.insert(i, line1, line2, ...)</code></li></ul><p>Inserts one or more lines into the subtitles file before the numbered line. In
the first syntax, you supply a negative index. E.g. to insert a line before
line 5 you supply index -5 (negative 5.)</p><p>Inserting lines will move lines after the inserted lines to move down in index,
such that old indexes will no longer be valid.</p><p>Inserting lines into the wrong section of the subtitle file has undefined
results, and may break in weird ways.</p><dl><dt><code>i</code> (<code>number</code>)</dt><dd>Index to insert before.</dd><dt><code>line</code> (<code>table</code>)</dt><dd>The line object table to insert into the subtitles file.</dd></dl><p>The latter function-call syntax is preferred for readability. The table index
setting syntax is slightly faster.</p><p>Inserting lines uses the list cursor and will move it.</p><h3 id=replace-line>Replace line <a href=#replace-line class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>subtitles[i] = line</code></p><p>Delete the indexed line and insert the given line in its stead.</p><dl><dt><code>i</code> (<code>number</code>)</dt><dd>The line index to replace at.</dd><dt><code>line</code> (<code>table</code>)</dt><dd>The line object table to replace with.</dd></dl><p>Replacing lines uses the list cursor and will move it.</p><p>Replacing lines with lines of a different type has undefined results, and may
break in weird ways.</p><h3 id=delete-line>Delete line <a href=#delete-line class=anchor aria-hidden=true>#</a></h3><p>Synopsis:</p><ul><li><code>subtitles[i] = nil</code></li><li><code>subtitles.delete(i)</code></li><li><code>subtitles.delete(i1, i2, ...)</code></li><li><code>subtitles.delete({i1, i2, ...})</code></li><li><code>subtitles.deleterange(first, last)</code></li></ul><p>Remove one or more from the subtitles file. All lines after the deleted line(s)
will move up to fill the deleted indexes, so old indexes will no longer be
valid.</p><p>The third syntax supports deleting multiple indexed lines in one call. The
indexes given must all be correct for the subtitle file&rsquo;s state before any
lines are deleted.</p><p>The fourth syntax is identical to <code>subtitles.delete(unpack(tbl))</code>, but
supports tables which are too large to unpack and will be slightly
faster if you have the lines in a table anyway.</p><p>Trying to delete a nonexistent line is an error, except for with deleterange.</p><p>The fifth syntax deletes a range of lines, both indexed lines inclusive.</p><dl><dt><code>i</code> (<code>number</code>)</dt><dd>Index of the line to delete.</dd><dt><code>first</code> (<code>number</code>)</dt><dd>Index of the first line of the range to delete.</dd><dt><code>last</code> (<code>number</code>)</dt><dd>Index of the last line of the range to delete.</dd></dl><p>Deleting lines uses the list cursor and will move it.</p><h3 id=creating-an-undo-point>Creating an undo point <a href=#creating-an-undo-point class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.set_undo_point(description)</code></p><p>You should always create an undo point at the end of any macro which made
changes to the subtitles object. If you do not, one will automatically be set
for you, but in future versions of Aegisub this may change to rolling back any
changes made instead.</p><p>You can set multiple undo points in a single macro, but it is rarely a good
idea to.</p><p>Only available in macro processing functions, as it doesn&rsquo;t make sense anywhere
else either.</p><dl><dt><code>description</code> (<code>string</code>)</dt><dd>Text to appear in the Edit menu for the Undo and Redo items to describe the
action that can be undone.</dd></dl><p>This is not really a function in the subtitles object, but it is still closely
tied to it.</p><h2 id=line-data-tables>Line data tables <a href=#line-data-tables class=anchor aria-hidden=true>#</a></h2><p>When you read lines from the subtitle file object they will always be one of a
few classes of lines, and when you write lines back to the subtitle file they
must also follow the format of one of those classes.</p><p>The line data objects are regular Lua tables with some specific fields defined.</p><p>Here&rsquo;s a list of the different classes of lines:</p><dl><dt><code>info</code></dt><dd>A key/value pair in the Script Info section of the file</dd><dt><code>style</code></dt><dd>a regular style definition line</dd><dt><code>dialogue</code></dt><dd>A dialogue line, which may or may not be a comment. These are the lines you
see in the grid in Aegisub.</dd><dt><code>unknown</code></dt><dd>An unknown kind of line.</dd></dl><p>There&rsquo;s three fields that always exist in all line data tables:</p><dl><dt><code>class</code> (<code>string</code>)</dt><dd>The name of the class of line this is, see the list above.</dd><dt><code>raw</code> (<code>string</code>)</dt><dd>The raw text of the line, from first to last character on the physical line.</dd><dt><code>section</code> (<code>string</code>)</dt><dd>Which section of the file the line belongs to. If the line is placed before
the first section heading, this field is <code>nil</code>.</dd></dl><h3 id=info-class><code>info</code> class <a href=#info-class class=anchor aria-hidden=true>#</a></h3><p>This class defines two additional fields:</p><dl><dt><code>key</code> (<code>string</code>)</dt><dd>The part of the line before the first colon, with leading and trailing spaces
removed.</dd><dt><code>value</code> (<code>string</code>)</dt><dd>Everything after the first colon on the line, also with leading and trailing
spaces removed.</dd></dl><h3 id=style-class><code>style</code> class <a href=#style-class class=anchor aria-hidden=true>#</a></h3><p>This class defines a large number of additional fields. It&rsquo;s usually processed
by the <em>karaskel</em> and modified a bit by that. See the <em>karaskel.lua</em> section on
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/karaskel.lua/#styletable>style tables</a> for more
information about this class.</p><h3 id=dialogue-class><code>dialogue</code> class <a href=#dialogue-class class=anchor aria-hidden=true>#</a></h3><p>This class defines a large number of additional fields. It&rsquo;s usually processed
by the <em>karaskel</em> and has many calculated fields added by that. See the
<em>karaskel.lua</em> section on <a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/modules/karaskel.lua/#dialoguelinetable>dialogue line tables</a> for more
information on this class.</p><h3 id=unknown-class><code>unknown</code> class <a href=#unknown-class class=anchor aria-hidden=true>#</a></h3><p>No additional fields are defined by this class, due to its nature. This might
be things like files embedded into the subtitles. You shouldn&rsquo;t try to work
with these lines unless you really know what you&rsquo;re doing. Deleting, modifying
and inserting <code>unknown</code> lines has undefined consequences. (That means, even if
it works today it might not work tomorrow or in the next version of Aegisub.)</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/registration/><div class="card my-1"><div class="card-body py-2">&larr; 注册</div></div></a><a class=ms-auto href=https://aegisub.github.io/aegisite/zh-cn/docs/3.2/automation/lua/progress_reporting/><div class="card my-1"><div class="card-body py-2">进度报告 &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a> and <a class=text-muted href=https://getdoks.org/>Doks</a>.<br>Copyright (c) AegiSite <a href=https://github.com/Aegisub/aegisite/graphs/contributors>contributors</a> and <a href=https://github.com/computerfan/Chinese-aegisite/graphs/contributors>translators</a>.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://aegisub.github.io/aegisite/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=https://aegisub.github.io/aegisite/js/bootstrap.min.fdbe9b9ba88a036135318f3c721784d684ac9e3280fe282cc80d7d49f7f9c82780cd54228c1608685a230c09984300d7946fc471734d566fcebc148b65bd16db.js integrity="sha512-/b6bm6iKA2E1MY88cheE1oSsnjKA/igsyA19Sff5yCeAzVQijBYIaFojDAmYQwDXlG/EcXNNVm/OvBSLZb0W2w==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/js/highlight.min.8bb6cfba442658ac8fa7d0fe8972ab0a493ada9523a7705011323e2d32fce59d7e1e2c5d07813bf6e4e9543aac7a6871be209a76fdac6f5362bd22008b2a1c9e.js integrity="sha512-i7bPukQmWKyPp9D+iXKrCkk62pUjp3BQETI+LTL85Z1+HixdB4E79uTpVDqsemhxviCadv2sb1NivSIAiyocng==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/main.min.9504b415386e94873638d6424009244321829335c58e8217ed1a4c776d219a4df944204093fd9024a02923b96849f0d622ce7e8cd994778575d2b7643920e34e.js integrity="sha512-lQS0FThulIc2ONZCQAkkQyGCkzXFjoIX7RpMd20hmk35RCBAk/2QJKApI7loSfDWIs5+jNmUd4V10rdkOSDjTg==" crossorigin=anonymous defer></script></body></html>