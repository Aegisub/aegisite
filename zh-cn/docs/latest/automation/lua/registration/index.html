<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aegisub.github.io/aegisite/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://aegisub.github.io/aegisite/main.9979e0ffd73ff24a57d2d6ccbf74fd8e4d167353c7e8c4f17a77c321777141d2c09329ceba6ba5cfe0be06bf4026cd37745ba1cc14668401b6a15b9239139d7e.css integrity="sha512-mXng/9c/8kpX0tbMv3T9jk0Wc1PH6MTxenfDIXdxQdLAkynOumulz+C+Br9AJs03dFuhzBRmhAG2oVuSOROdfg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}.collapse:not(.show){display:block}button.btn-toggle{cursor:unset}button.btn-toggle::before{display:none}.doks-subnavbar{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>注册 - Aegisub</title><meta name=description content="注册 涵盖了以下内容：使你自己编写的Lua脚本Automation 4 Lua出现在Aegisub中、 提供和脚本有关的信息、该脚本提供了什么样的 特性。
有关特性(Feature)的解释 # Automation 4 中的一个最基础的概念就是 特性 。特性决定了Aegisub如何响应用户的动作去调用脚本。
特性不是简单的回调。它通常是一组几个回调函数,以及如何在GUI中向用户呈现它们的一些信息。
一种特性的类型是 macro (宏)，宏会被作为一个小项展示在自动化菜单中，它有一个名字(即菜单中显示的内容)， 一段描述(当鼠标悬停在该项时，状态栏显示的说明文本)，一个处理函数(当用户点按该项时执行的函数) 还有一个可选的有效性确认函数(决定这个宏在当前状态下是否可以运行，如：卡拉OK模板执行器就具有这个属性，如果检测不到template行，该项为灰色不可用)
另外一种特性是 export filter(导出滤镜)。导出滤镜会被展示在Export 对话框中，在进行导出操作时被应用 导出滤镜也有名字、描述、处理函数，同时提供了配置面板函数。使用配置面板函数可以返回一个配置面板对话框， 在执行导出滤镜的时候会被展示给用户，在配置面板中输入的参数和配置可以传递给处理函数作为参数。
全局脚本信息变量 # 一个脚本中，可以设置一些全局变量，来给Aegisub提供一些元数据。 这些全局变量会被展示在Automation Manager 对话框中和脚本信息对话框中。
 script_name (脚本名，字符串) - 脚本的名称，应尽量简洁 script_description (脚本描述，字符串) - 描述该脚本可以达成什么目的，也不建议太长。 script_version (脚本版本号，字符串或数字) - 脚本的版本号 script_author (脚本作者，字符串) - 脚本作者信息  上述的变量均为可选项，即使一个脚本头部没有定义这些变量，Aegisub也会调取文件名来显示。
注册函数 # 注册函数是指一些Automation 4 提供的现成 Lua 函数，可以方便你把一项特性变为Aegisub可用的形式 你经常会在顶部或者底部调用它。
aegisub.register_macro # 摘要: aegisub.register_macro(name, description, processing_function, validation_function, is_active_function)
将脚本注册成为一个具有marco(宏)特性的项。
  name (名称，字符串) - 自动化 菜单中显示出来的名字。尽量简洁。"><link rel=canonical href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="og:title" content="注册"><meta property="og:description" content="注册 涵盖了以下内容：使你自己编写的Lua脚本Automation 4 Lua出现在Aegisub中、 提供和脚本有关的信息、该脚本提供了什么样的 特性。
有关特性(Feature)的解释 # Automation 4 中的一个最基础的概念就是 特性 。特性决定了Aegisub如何响应用户的动作去调用脚本。
特性不是简单的回调。它通常是一组几个回调函数,以及如何在GUI中向用户呈现它们的一些信息。
一种特性的类型是 macro (宏)，宏会被作为一个小项展示在自动化菜单中，它有一个名字(即菜单中显示的内容)， 一段描述(当鼠标悬停在该项时，状态栏显示的说明文本)，一个处理函数(当用户点按该项时执行的函数) 还有一个可选的有效性确认函数(决定这个宏在当前状态下是否可以运行，如：卡拉OK模板执行器就具有这个属性，如果检测不到template行，该项为灰色不可用)
另外一种特性是 export filter(导出滤镜)。导出滤镜会被展示在Export 对话框中，在进行导出操作时被应用 导出滤镜也有名字、描述、处理函数，同时提供了配置面板函数。使用配置面板函数可以返回一个配置面板对话框， 在执行导出滤镜的时候会被展示给用户，在配置面板中输入的参数和配置可以传递给处理函数作为参数。
全局脚本信息变量 # 一个脚本中，可以设置一些全局变量，来给Aegisub提供一些元数据。 这些全局变量会被展示在Automation Manager 对话框中和脚本信息对话框中。
 script_name (脚本名，字符串) - 脚本的名称，应尽量简洁 script_description (脚本描述，字符串) - 描述该脚本可以达成什么目的，也不建议太长。 script_version (脚本版本号，字符串或数字) - 脚本的版本号 script_author (脚本作者，字符串) - 脚本作者信息  上述的变量均为可选项，即使一个脚本头部没有定义这些变量，Aegisub也会调取文件名来显示。
注册函数 # 注册函数是指一些Automation 4 提供的现成 Lua 函数，可以方便你把一项特性变为Aegisub可用的形式 你经常会在顶部或者底部调用它。
aegisub.register_macro # 摘要: aegisub.register_macro(name, description, processing_function, validation_function, is_active_function)
将脚本注册成为一个具有marco(宏)特性的项。
  name (名称，字符串) - 自动化 菜单中显示出来的名字。尽量简洁。"><meta property="og:url" content="https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/"><meta property="og:site_name" content="Aegisub"><meta property="og:image" content="https://aegisub.github.io/aegisite/img/logo.png"><meta property="og:image:alt" content="Aegisub"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@aegisub"><meta name=twitter:creator content><meta name=twitter:title content="注册"><meta name=twitter:description content><meta name=twitter:image content="https://aegisub.github.io/aegisite/img/logo.png"><meta name=twitter:image:alt content="注册"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://aegisub.github.io/#/schema/organization/1","name":"Aegisub","url":"https://aegisub.github.io/","sameAs":["https://twitter.com/aegisub","https://github.com/Aegisub/Aegisub"],"logo":{"@type":"ImageObject","@id":"https://aegisub.github.io/#/schema/image/1","url":"https://aegisub.github.io/logo-aegisub.png","width":512,"height":512,"caption":"Aegisub"},"image":{"@id":"https://aegisub.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://aegisub.github.io/#/schema/website/1","url":"https://aegisub.github.io/","name":"Aegisub","description":"Aegisub 是一款自由、跨平台的开源字幕编辑软件。 它能让您轻松且高效地完成时间轴的制作， 并利用内置的各种实用工具来调整字幕的样式， 还可以进行实时的视频预览。","publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/","name":"注册","description":"","isPartOf":{"@id":"https://aegisub.github.io/#/schema/website/1"},"about":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#/schema/image/2"},"inLanguage":"zh_CN","potentialAction":[{"@type":"ReadAction","target":["https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/"]}]},{"@type":"BreadcrumbList","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/","url":"https://aegisub.github.io/aegisite/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/","url":"https://aegisub.github.io/aegisite/zh-cn/","name":"Zh Cn"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/","name":"Latest"}},{"@type":"ListItem","position":5,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/","name":"Automation"}},{"@type":"ListItem","position":6,"item":{"@type":"WebPage","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/","url":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/","name":"Lua"}},{"@type":"ListItem","position":7,"item":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://aegisub.github.io/#/schema/article/1","headline":"注册","description":"","isPartOf":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/"},"mainEntityOfPage":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://aegisub.github.io/#/schema/person/2"},"publisher":{"@id":"https://aegisub.github.io/#/schema/organization/1"},"image":{"@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://aegisub.github.io/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#/schema/image/2","url":"https://aegisub.github.io/aegisite/img/logo.png","contentUrl":"https://aegisub.github.io/aegisite/img/logo.png","caption":"注册"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://aegisub.github.io/aegisite/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aegisub.github.io/aegisite/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aegisub.github.io/aegisite/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://aegisub.github.io/aegisite/site.webmanifest></head><body class="docs single"><div class=sticky-lg-top><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=https://aegisub.github.io/aegisite/zh-cn/ aria-label=Aegisub>Aegisub</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://aegisub.github.io/aegisite/zh-cn/>Aegisub</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/zh-cn/downloads/main/>下载</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/zh-cn/docs/>文档</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub/issues>Bug 追踪</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://aegisub.github.io/aegisite/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/Aegisub/Aegisub aria-label="View repository on GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
ZH
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/>简体中文</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=https://aegisub.github.io/aegisite/docs/latest/automation/lua/registration/ hreflang=en lang=en>English</a></li></ul></div></nav></header></div><nav class="doks-subnavbar py-2 sticky-lg-top d-lg-none" aria-label="Secondary navigation"><div class="container-fluid d-flex align-items-md-center"><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed ms-auto" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation">Docs Navigation<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
导航</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/main_page/>主页</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
介绍</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/about/>Aegisub 是什么？</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/overview/>概述</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/highlights/>亮点</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/credits/>贡献者</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/support/>支持 Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
教程</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/karaoke_timing_tutorial/>卡拉OK计时</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/karaoke_inline-fx/>卡拉OK内联特效</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/furigana_karaoke/>注音卡拉OK</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
制作字幕</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/editing_subtitles/>编辑字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/exporting/>导出字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/attaching_subtitles_to_video/>将字幕加到视频上</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/spell_checker/>拼写检查器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/translation_assistant/>翻译助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/paste_over/>选择性粘贴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/select_lines/>选择多行</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
排版</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/typesetting/>介绍</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/video/>视频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/styles/>样式</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/visual_typesetting/>可视化排版</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/ass_tags/>ASS标签</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/colour_picker/>颜色选择器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/styling_assistant/>样式助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/resolution_resampler/>重设分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/fonts_collector/>字体收集器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
时间轴</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/audio/>音频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/timing/>制作时间轴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/shift_times/>平移时间</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/timing_post-processor/>时间后续处理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/kanji_timer/>汉字计时器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
自动化</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/>自动化</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
卡拉OK模版执行器</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/declaring_template_and_code_lines/>声明template行和code行</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/template_execution_rules_and_order/>卡拉OK模板执行环境和顺序</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/template_modifiers/>模版修饰语</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/inline_variables/>内联变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/code_lines_and_blocks/>Code行 和 Code区</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial_1/>教程一</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial_2/>教程二</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua 相关</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/>Overview</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/>注册</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>字幕文件接口</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/progress_reporting/>进度报告</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/dialogs/>对话框</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/miscellaneous_apis/>杂项API</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua模块</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/clipboard/>剪贴板</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/manager/>自动化脚本管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/running_macros/>运行宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/included_macros/>附带的宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
杂项</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/options/>选项</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/autosave/>自动保存</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/aegisub_path_specifiers/>Aegisub路径变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/properties/>脚本配置</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/script_resolution/>脚本分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/attachment_manager/>附件管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/commands/>Commands</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-navigation aria-expanded=false>
导航</button><div class=collapse id=section-navigation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/main_page/>主页</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
介绍</button><div class=collapse id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/about/>Aegisub 是什么？</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/overview/>概述</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/highlights/>亮点</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/credits/>贡献者</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/general_disclaimer/>General Disclaimer</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/support/>支持 Aegisub</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/faq/>FAQ</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=false>
教程</button><div class=collapse id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/tutorials/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/karaoke_timing_tutorial/>卡拉OK计时</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/karaoke_inline-fx/>卡拉OK内联特效</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/furigana_karaoke/>注音卡拉OK</a></li></ul></div></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-working-with-subtitles aria-expanded=false>
制作字幕</button><div class=collapse id=section-working-with-subtitles><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/editing_subtitles/>编辑字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/exporting/>导出字幕</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/attaching_subtitles_to_video/>将字幕加到视频上</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/spell_checker/>拼写检查器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/translation_assistant/>翻译助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/paste_over/>选择性粘贴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/select_lines/>选择多行</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-typesetting aria-expanded=false>
排版</button><div class=collapse id=section-typesetting><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/typesetting/>介绍</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/video/>视频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/styles/>样式</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/visual_typesetting/>可视化排版</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/ass_tags/>ASS标签</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/colour_picker/>颜色选择器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/styling_assistant/>样式助手</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/resolution_resampler/>重设分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/fonts_collector/>字体收集器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-timing aria-expanded=false>
时间轴</button><div class=collapse id=section-timing><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/audio/>音频</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/timing/>制作时间轴</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/shift_times/>平移时间</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/timing_post-processor/>时间后续处理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/kanji_timer/>汉字计时器</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation aria-expanded=true>
自动化</button><div class="collapse show" id=section-automation><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/>自动化</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-karaoke-templater aria-expanded=false>
卡拉OK模版执行器</button><div class=collapse id=section-karaoke-templater><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/declaring_template_and_code_lines/>声明template行和code行</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/template_execution_rules_and_order/>卡拉OK模板执行环境和顺序</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/template_modifiers/>模版修饰语</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/inline_variables/>内联变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/code_lines_and_blocks/>Code行 和 Code区</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/code_execution_environment/>Execution envirionment</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-automation-tutorials aria-expanded=false>
Automation Tutorials</button><div class=collapse id=section-automation-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial_1/>教程一</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/karaoke_templater/tutorial_2/>教程二</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-reference aria-expanded=true>
Lua 相关</button><div class="collapse show" id=section-lua-reference><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/>Overview</a></li><li><a class="docs-link rounded active" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/>注册</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>字幕文件接口</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/progress_reporting/>进度报告</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/dialogs/>对话框</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/miscellaneous_apis/>杂项API</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-lua-modules aria-expanded=false>
Lua模块</button><div class=collapse id=section-lua-modules><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/>Overview</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/karaskel.lua/>karaskel.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/util/>utils.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/unicode/>unicode.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/cleantags/>cleantags.lua</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/clipboard/>剪贴板</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/modules/re/>re</a></li></ul></div></li></ul></div></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/manager/>自动化脚本管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/running_macros/>运行宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/included_macros/>附带的宏</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/history_of_automation/>History of Automation</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-miscellaneous aria-expanded=false>
杂项</button><div class=collapse id=section-miscellaneous><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/options/>选项</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/autosave/>自动保存</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/aegisub_path_specifiers/>Aegisub路径变量</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/properties/>脚本配置</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/script_resolution/>脚本分辨率</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/attachment_manager/>附件管理器</a></li><li><a class="docs-link rounded" href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/commands/>Commands</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#有关特性feature的解释>有关特性(Feature)的解释</a></li><li><a href=#全局脚本信息变量>全局脚本信息变量</a></li><li><a href=#注册函数>注册函数</a><ul><li><a href=#aegisubregister_macro>aegisub.register_macro</a></li><li><a href=#aegisubregister_filter>aegisub.register_filter</a></li></ul></li><li><a href=#feature-callback-functions>Feature callback functions</a><ul><li><a href=#macro-processing-function>Macro processing function</a></li><li><a href=#macro-validation-function>Macro validation function</a></li><li><a href=#export-filter-processing-function>Export filter processing function</a></li><li><a href=#export-filter-configuration-panel-provider>Export filter configuration panel provider</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>注册</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#有关特性feature的解释>有关特性(Feature)的解释</a></li><li><a href=#全局脚本信息变量>全局脚本信息变量</a></li><li><a href=#注册函数>注册函数</a><ul><li><a href=#aegisubregister_macro>aegisub.register_macro</a></li><li><a href=#aegisubregister_filter>aegisub.register_filter</a></li></ul></li><li><a href=#feature-callback-functions>Feature callback functions</a><ul><li><a href=#macro-processing-function>Macro processing function</a></li><li><a href=#macro-validation-function>Macro validation function</a></li><li><a href=#export-filter-processing-function>Export filter processing function</a></li><li><a href=#export-filter-configuration-panel-provider>Export filter configuration panel provider</a></li></ul></li></ul></nav></div></nav><p><strong>注册</strong> 涵盖了以下内容：使你自己编写的Lua脚本<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/>Automation 4
Lua</a>出现在Aegisub中、
提供和脚本有关的信息、该脚本提供了什么样的 <em>特性</em>。</p><h2 id=有关特性feature的解释>有关特性(Feature)的解释 <a href=#%e6%9c%89%e5%85%b3%e7%89%b9%e6%80%a7feature%e7%9a%84%e8%a7%a3%e9%87%8a class=anchor aria-hidden=true>#</a></h2><p>Automation 4 中的一个最基础的概念就是 <em>特性</em>
。特性决定了Aegisub如何响应用户的动作去调用脚本。</p><p>特性不是简单的回调。它通常是一组几个回调函数,以及如何在GUI中向用户呈现它们的一些信息。</p><p>一种特性的类型是 <strong>macro</strong>
(宏)，宏会被作为一个小项展示在自动化菜单中，它有一个名字(即菜单中显示的内容)，
一段描述(当鼠标悬停在该项时，状态栏显示的说明文本)，一个处理函数(当用户点按该项时执行的函数)
还有一个可选的有效性确认函数(决定这个宏在当前状态下是否可以运行，如：卡拉OK模板执行器就具有这个属性，如果检测不到template行，该项为灰色不可用)</p><p>另外一种特性是 <strong>export
filter</strong>(导出滤镜)。导出滤镜会被展示在<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/exporting/>Export</a>
对话框中，在进行导出操作时被应用
导出滤镜也有名字、描述、处理函数，同时提供了配置面板函数。使用配置面板函数可以返回一个配置面板对话框，
在执行导出滤镜的时候会被展示给用户，在配置面板中输入的参数和配置可以传递给处理函数作为参数。</p><h2 id=全局脚本信息变量>全局脚本信息变量 <a href=#%e5%85%a8%e5%b1%80%e8%84%9a%e6%9c%ac%e4%bf%a1%e6%81%af%e5%8f%98%e9%87%8f class=anchor aria-hidden=true>#</a></h2><p>一个脚本中，可以设置一些全局变量，来给Aegisub提供一些元数据。
这些全局变量会被展示在<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/manager/>Automation Manager</a>
对话框中和脚本信息对话框中。</p><ul><li><strong>script_name</strong> (脚本名，字符串) - 脚本的名称，应尽量简洁</li><li><strong>script_description</strong> (脚本描述，字符串) -
描述该脚本可以达成什么目的，也不建议太长。</li><li><strong>script_version</strong> (脚本版本号，字符串或数字) - 脚本的版本号</li><li><strong>script_author</strong> (脚本作者，字符串) - 脚本作者信息</li></ul><p>上述的变量均为可选项，即使一个脚本头部没有定义这些变量，Aegisub也会调取文件名来显示。</p><h2 id=注册函数>注册函数 <a href=#%e6%b3%a8%e5%86%8c%e5%87%bd%e6%95%b0 class=anchor aria-hidden=true>#</a></h2><p>注册函数是指一些Automation 4 提供的现成 Lua
函数，可以方便你把一项特性变为Aegisub可用的形式
你经常会在顶部或者底部调用它。</p><h3 id=aegisubregister_macro>aegisub.register_macro <a href=#aegisubregister_macro class=anchor aria-hidden=true>#</a></h3><p>摘要:
<code>aegisub.register_macro(name, description, processing_function, validation_function, is_active_function)</code></p><p>将脚本注册成为一个具有marco(宏)特性的项。</p><ul><li><p><strong>name</strong> (名称，字符串) - 自动化 菜单中显示出来的名字。尽量简洁。</p><p>如果名字中有向前斜杠(/)，名字会被斜杠分开，斜杠后的内容在自动化菜单中表现为子项。
例如，如果你注册了宏 &ldquo;Foo/Bar&rdquo; 和 &ldquo;Foo/Baz&rdquo;，自动化菜单中，
&ldquo;Foo&rdquo; 下会有 &ldquo;Bar&rdquo; 和 &ldquo;Baz&rdquo; 两个子项。</p><p>菜单可以支持多级的嵌套，不过多级嵌套不是什么好主意</p></li><li><p><strong>description</strong> (描述，字符串) -
当鼠标悬停在该项时，状态栏显示的说明文本。
建议这部分写的简明直接，描述清楚该脚本是做什么的。</p></li><li><p><strong>processing_function</strong> (处理函数，函数) -
当用户点击了这项时，调用的处理函数 <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#macroprocessingfunction>macro processing function
API</a>.。</p></li><li><p><strong>validation_function</strong> (有效性检测函数，函数, 可选) -
这个函数被用来检测当前项是否可用。
(灰色还是正常)。如果不设置该函数，宏则一直处于可用状态。
这个函数遵循 <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#macrovalidationfunction>macro validation function
API</a> 中的说明。</p></li><li><p><strong>is_active_function</strong> (活动检测函数，函数, 可选) -
这个函数会在当前可用项的左侧显示一个对勾。 规则同有效检测函数</p></li></ul><h3 id=aegisubregister_filter>aegisub.register_filter <a href=#aegisubregister_filter class=anchor aria-hidden=true>#</a></h3><p>摘要:
<code>aegisub.register_filter(name, description, priority, processing_function, configuration_panel_provider)</code></p><p>将脚本注册成为一个具有filter(滤镜)特性的项。</p><ul><li><p><strong>name</strong> (名称，字符串) - 在 导出滤镜
列表中呈现的名称，应尽可能简洁。</p></li><li><p><strong>description</strong> (描述，字符串) -
当用户选中该导出滤镜时，在描述框中显示的描述文字。</p></li><li><p><strong>priority</strong> (优先级，数字) -
决定导出滤镜的应用顺序。高优先级的滤镜会被优先应用。 用户可以在 导出
对话框中修改顺序。 Aegisub内置导出滤镜的优先级顺序:</p><ul><li>帧率转换 = 1000 (卡拉OK效果应该比这个有更高的优先级)</li><li>清除脚本信息 = 0
(你的脚本可能依赖于这个脚本会清理掉的信息，所以它最后被应用)</li><li>修复样式 = -5000 (一般总是最后运行)</li></ul></li><li><p><strong>processing_function</strong> (处理函数，函数) -
当用户执行导出操作时调用的处理函数。 这个函数需要符合 <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#exportfilterprocessingfunction>export filter
processing function
API</a>的要求。</p></li><li><p><strong>configuration_panel_provider</strong> (配置面板函数，函数，可选) -
为导出滤镜提供了配置面板的函数
如果不写这个函数，导出滤镜不会具有配置面板。需要遵循 <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#exportfilterconfigurationpanelprovider>export filter
configuration panel provider
API</a> 的要求。</p></li></ul><h2 id=feature-callback-functions>Feature callback functions <a href=#feature-callback-functions class=anchor aria-hidden=true>#</a></h2><p>These are the callback functions you provide to the registration functions.</p><h3 id=macro-processing-function>Macro processing function <a href=#macro-processing-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>process_macro(subtitles, selected_lines, active_line)</code></p><p>Macro processing functions passed to
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#aegisub.register_macro><code>aegisub.register_macro</code></a>
must have this signature. The name <code>process_macro</code> is a placeholder for your
own function name.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> you use to manipulate
the subtitles with.</li><li><strong>selected_lines</strong> (table) - An array with indexes of the selected lines.
The values in this table are line indexes in the <em>subtitles</em> object at its
initial state. Only <code>dialogue</code> class lines can ever be selected.</li><li><strong>active_line</strong> (number) - The line that is currently available for
editing in the subtitle editing area. This is an index into the
<em>subtitles</em> object. This line will usually also be selected, but this is
not a strict requirement.</li></ul><p><strong>Return value:</strong>
The macro processing function can return up to two values: a new
<code>selected_lines</code> table containing indices of the lines to select after the
macro returns, and an index of the line to make the new <code>active_line</code>. If
set, the new active line index must be one of the lines in the new
<code>selected_lines</code> table.</p><h3 id=macro-validation-function>Macro validation function <a href=#macro-validation-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>validate_macro(subtitles, selected_lines, active_line)</code></p><p>Macro validation functions passed to
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#aegisub.register_macro><code>aegisub.register_macro</code></a>
must have this signature. The name <code>validate_macro</code> is a placeholder for
your own function name.</p><p><strong>Important, execution time:</strong> Validation functions should always run very
fast. Do as little work as possible inside this function, because it is run
every time the user pulls open the Automation menu, and every millisecond
you spend in <code>validate_macro</code> is one millisecond delay in opening the menu.
Consider that the user might have very large files open. Don&rsquo;t block the UI.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> for the current subtitle
file. This is <strong>read-only</strong>. You cannot modify the subtitles in the
validation function, and attempting to do so will cause a run-time error.</li><li><strong>selected_lines</strong> (table) - An array with indexes of the selected lines.
The values in this table are line indexes in the <em>subtitles</em> object at its
initial state. Only <code>dialogue</code> class lines can ever be selected.</li><li><strong>active_line</strong> (number) - The line that is currently available for
editing in the subtitle editing area. This is an index into the
<em>subtitles</em> object.</li></ul><p><strong>Return value:</strong>
Boolean, <code>true</code> if the macro can run given the current
state of <em>subtitles</em>, <em>selected_lines</em> and <em>active_line</em>, <code>false</code> if it can
not.</p><p>In addition to the primary return value, the validation function can return
a string. If it does, the description of the macro is set to the string.
This is intended for reporting information to the user about why the macro
cannot be run, but there may be more uses for it.</p><h3 id=export-filter-processing-function>Export filter processing function <a href=#export-filter-processing-function class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>process_filter(subtitles, settings)</code></p><p>Export filter processing functions passed to
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#aegisub.register_filter><code>aegisub.register_filter</code></a>
must have this signature. The name <code>process_filter</code> is a placeholder for
your own function name.</p><p>You do not have to worry about undo issues with export filters. You always
work on a copy of the subtitle file.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> you use to manipulate
the subtitles with. This is a copy of the open subtitles file, so
modifying this subtitles object does not modify the open file and will
only affect the exported file.</li><li><strong>settings</strong> (table) - Configuration settings entered into the
configuration panel or an empty table if there is no configuration panel.
See the page on <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/dialogs/>configuration dialogues</a> for more information
on the format of this table.</li></ul><p><strong>Return value:</strong>
Nothing.</p><h3 id=export-filter-configuration-panel-provider>Export filter configuration panel provider <a href=#export-filter-configuration-panel-provider class=anchor aria-hidden=true>#</a></h3><p>Signature: <code>get_filter_configuration_panel(subtitles, old_settings)</code></p><p>Export filter configuration panel providers passed to
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/registration/#aegisub.register_filter><code>aegisub.register_filter</code></a>
must have this signature. The name <code>get_filter_configuration_panel</code> is a
placeholder for your own function name.</p><p><strong>Important, execution time:</strong>
This function is called automatically when
the user opens the Export dialogue, and Aegisub blocks until it returns with
a configuration panel. Consider that the user might have a very large file
open, and that every millisecond spent creating your configuration dialogue
is one more millisecond the user has to wait for the Export dialogue to
open. Don&rsquo;t block the UI.</p><ul><li><strong>subtitles</strong> (user data) - The <a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/>subtitles object</a> for the current subtitle
file. This is <strong>read-only</strong>. You cannot modify the subtitles in the filter
configuration provider. Attempting to modify the subtitles will cause a
run-time error.</li><li><strong>old_settings</strong> (table) - Previous configuration settings entered into
the configuration panel, if any. When an Automation 4 export filter is
run, any configuration settings are automatically stored to the original
file. If any stored settings exist for this filter, they are passed as
<em>old_settings</em> so you can use them as a base for filling in defaults.</li></ul><p><strong>Return value:</strong>
A configuration dialogue table. See the page on
<a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/dialogs/>configuration dialogues</a> for
more information on the format of this table.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/><div class="card my-1"><div class="card-body py-2">&larr; Lua 相关</div></div></a><a class=ms-auto href=https://aegisub.github.io/aegisite/zh-cn/docs/latest/automation/lua/subtitle_file_interface/><div class="card my-1"><div class="card-body py-2">字幕文件接口 &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a> and <a class=text-muted href=https://getdoks.org/>Doks</a>.<br>Copyright (c) AegiSite <a href=https://github.com/Aegisub/aegisite/graphs/contributors>contributors</a> and <a href=https://github.com/computerfan/Chinese-aegisite/graphs/contributors>translators</a>.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://aegisub.github.io/aegisite/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=https://aegisub.github.io/aegisite/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/js/highlight.min.4f51b93ee96c3e2c0e1671986624888b24b9b8bfee2a20aa0556d7f3a61098d5c094012a22f5ed6f904b570b0554a4473114d439df142e1018d751582d3470f6.js integrity="sha512-T1G5PulsPiwOFnGYZiSIiyS5uL/uKiCqBVbX86YQmNXAlAEqIvXtb5BLVwsFVKRHMRTUOd8ULhAY11FYLTRw9g==" crossorigin=anonymous defer></script>
<script src=https://aegisub.github.io/aegisite/main.min.6f7a46bd1f121978f9b99a72930700eeeea078245b498f61330d43745353ee2a541491c87fd8307512f49a752b386387e2c265a11377ecce26a2acb8fa24fecf.js integrity="sha512-b3pGvR8SGXj5uZpykwcA7u6geCRbSY9hMw1DdFNT7ipUFJHIf9gwdRL0mnUrOGOH4sJloRN37M4moqy4+iT+zw==" crossorigin=anonymous defer></script></body></html>